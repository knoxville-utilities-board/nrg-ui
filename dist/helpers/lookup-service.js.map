{"version":3,"file":"lookup-service.js","sources":["../../src/helpers/lookup-service.ts"],"sourcesContent":["import Helper from '@ember/component/helper';\nimport { assert } from '@ember/debug';\nimport { getOwner } from '@ember/owner';\nimport { dependencySatisfies, macroCondition } from '@embroider/macros';\n\nimport type { DIRegistry } from '@ember/owner';\n\nexport interface LookupServiceSignature<Name extends keyof DIRegistry['service'] & string> {\n  Args: {\n    Positional: [Name];\n    Named: {\n      singleton?: boolean;\n    };\n  };\n  Return: DIRegistry['service'][Name];\n}\n\nexport default class LookupService<\n  Name extends keyof DIRegistry['service'] & string,\n> extends Helper<LookupServiceSignature<Name>> {\n  compute([name]: [Name], { singleton }: { singleton?: boolean }): DIRegistry['service'][Name] {\n    if (macroCondition(dependencySatisfies('ember-source', '^6.3.0'))) {\n      assert(\n        'Use of the `lookup-service` helper is not allowed with `ember-source` 6.3.0 or above.' +\n          'Instead, use the template tag syntax (.gjs or.gts file) to build a route component.',\n      );\n    }\n    if (macroCondition(dependencySatisfies('ember-route-templates', '*'))) {\n      assert(\n        'Use of the `lookup-service` helper is not allowed with `ember-route-templates`.' +\n          'Instead, use the template tag syntax (.gjs or.gts file) and the `Route` function ' +\n          'from `ember-route-templates` to build a route component.',\n      );\n    }\n\n    assert('Service name must be provided', name);\n\n    const owner = getOwner(this);\n\n    return owner!.lookup(`service:${name}`, {\n      singleton,\n    });\n  }\n}\n"],"names":["LookupService","Helper","compute","name","singleton","macroCondition","dependencySatisfies","assert","owner","getOwner","lookup"],"mappings":";;;;;AAiBe,MAAMA,aAAa,SAExBC,MAAM,CAA+B;AAC7CC,EAAAA,OAAOA,CAAC,CAACC,IAAI,CAAS,EAAE;AAAEC,IAAAA;AAAmC,GAAC,EAA+B;IAC3F,IAAIC,cAAc,CAACC,mBAAmB,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC,EAAE;AACjEC,MAAAA,MAAM,CACJ,uFAAuF,GACrF,qFACJ,CAAC;AACH,IAAA;IACA,IAAIF,cAAc,CAACC,mBAAmB,CAAC,uBAAuB,EAAE,GAAG,CAAC,CAAC,EAAE;AACrEC,MAAAA,MAAM,CACJ,iFAAiF,GAC/E,mFAAmF,GACnF,0DACJ,CAAC;AACH,IAAA;AAEAA,IAAAA,MAAM,CAAC,+BAA+B,EAAEJ,IAAI,CAAC;AAE7C,IAAA,MAAMK,KAAK,GAAGC,QAAQ,CAAC,IAAI,CAAC;AAE5B,IAAA,OAAOD,KAAK,CAAEE,MAAM,CAAC,CAAA,QAAA,EAAWP,IAAI,EAAE,EAAE;AACtCC,MAAAA;AACF,KAAC,CAAC;AACJ,EAAA;AACF;;;;"}