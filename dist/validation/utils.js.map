{"version":3,"file":"utils.js","sources":["../../src/validation/utils.ts"],"sourcesContent":["import ConfirmationValidator from './validators/confirmation.ts';\nimport CustomValidator from './validators/custom.ts';\nimport EmailValidator from './validators/email.ts';\nimport ExclusionValidator from './validators/exclusion.ts';\nimport FileValidator from './validators/file.ts';\nimport InclusionValidator from './validators/inclusion.ts';\nimport LengthValidator from './validators/length.ts';\nimport NumberValidator from './validators/number.ts';\nimport PasswordValidator from './validators/password.ts';\nimport PhoneValidator from './validators/phone.ts';\nimport PresenceValidator from './validators/presence.ts';\nimport RangeValidator from './validators/range.ts';\nimport RegexValidator from './validators/regex.ts';\n\nimport type { Computable, TranslatableOption, Validator } from './types.ts';\nimport type { Binding, Primitive } from '../index.ts';\nimport type { ConfirmationOptions } from './validators/confirmation.ts';\nimport type { CustomOptions } from './validators/custom.ts';\nimport type { EmailOptions } from './validators/email.ts';\nimport type { ExclusionOptions } from './validators/exclusion.ts';\nimport type { FileOptions } from './validators/file.ts';\nimport type { InclusionOptions } from './validators/inclusion.ts';\nimport type { LengthOptions } from './validators/length.ts';\nimport type { NumberOptions } from './validators/number.ts';\nimport type { PasswordOptions } from './validators/password.ts';\nimport type { PhoneOptions } from './validators/phone.ts';\nimport type { PresenceOptions } from './validators/presence.ts';\nimport type { RangeOptions } from './validators/range.ts';\nimport type { RegexOptions } from './validators/regex.ts';\n\n// It's a lot easier to work with a map of validators\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst Validators = {\n  confirmation: ConfirmationValidator,\n  custom: CustomValidator,\n  email: EmailValidator,\n  exclusion: ExclusionValidator,\n  file: FileValidator,\n  inclusion: InclusionValidator,\n  length: LengthValidator,\n  number: NumberValidator,\n  password: PasswordValidator,\n  phone: PhoneValidator,\n  presence: PresenceValidator,\n  range: RangeValidator,\n  regex: RegexValidator,\n};\ntype ValidatorType = keyof typeof Validators;\n\ndeclare type OptionsOf<T extends ValidatorType> = ConstructorParameters<(typeof Validators)[T]>[1];\n\ntype ValidatorFnArgs<\n  V extends ValidatorType = ValidatorType,\n  Context extends object = object,\n> = V extends V ? [V, OptionsOf<V>, Context | undefined] | [V, OptionsOf<V>] : never;\n\nexport function validator<\n  Context extends object = object,\n  T = unknown,\n  V extends ValidatorType = ValidatorType,\n>(\n  ...[type, options, context]: ValidatorFnArgs<V, Context>\n): Validator<unknown, Context, OptionsOf<V>> {\n  if (type === 'confirmation') {\n    return confirmation(options, context);\n  }\n\n  if (type === 'custom') {\n    return custom(options as CustomOptions<T, Context>, context);\n  }\n\n  if (type === 'email') {\n    return email(options, context);\n  }\n\n  if (type === 'exclusion') {\n    return exclusion(options, context);\n  }\n\n  if (type === 'file') {\n    return file(options, context);\n  }\n\n  if (type === 'inclusion') {\n    return inclusion(options, context);\n  }\n\n  if (type === 'length') {\n    return length(options, context);\n  }\n\n  if (type === 'number') {\n    return number(options, context);\n  }\n\n  if (type === 'phone') {\n    return phone(options, context);\n  }\n\n  if (type === 'presence') {\n    return presence(options, context);\n  }\n\n  if (type === 'range') {\n    return range(options, context);\n  }\n\n  if (type === 'regex') {\n    return regex(options, context);\n  }\n\n  if (type === 'password') {\n    return password(options, context);\n  }\n\n  throw new Error(`Unknown validator type: ${type}`);\n}\n\nexport function confirmation<Context extends object = object>(\n  options: Computable<Context, ConfirmationOptions>,\n  context?: Context,\n): Validator<TranslatableOption, Context, ConfirmationOptions> {\n  return (binding: Binding) => new ConfirmationValidator<Context>(binding, options, context);\n}\n\nexport function custom<Context extends object = object, T = unknown>(\n  options: Computable<Context, CustomOptions<T, Context>>,\n  context?: Context,\n): Validator<T, Context, CustomOptions<T, Context>> {\n  return (binding: Binding) => new CustomValidator<T, Context>(binding, options, context);\n}\n\nexport function email<Context extends object = object>(\n  options: Computable<Context, EmailOptions>,\n  context?: Context,\n): Validator<string, Context, EmailOptions> {\n  return (binding: Binding) => new EmailValidator<Context>(binding, options, context);\n}\n\nexport function exclusion<Context extends object = object, T extends Primitive = Primitive>(\n  options: Computable<Context, ExclusionOptions<T>>,\n  context?: Context,\n): Validator<T, Context, ExclusionOptions<T>> {\n  return (binding: Binding) => new ExclusionValidator<T, Context>(binding, options, context);\n}\n\nexport function file<Context extends object = object>(\n  options: Computable<Context, FileOptions>,\n  context?: Context,\n): Validator<File | File[], Context, FileOptions> {\n  return (binding: Binding) => new FileValidator<Context>(binding, options, context);\n}\n\nexport function inclusion<Context extends object = object, T extends Primitive = Primitive>(\n  options: Computable<Context, InclusionOptions<T>>,\n  context?: Context,\n): Validator<T, Context, InclusionOptions<T>> {\n  return (binding: Binding) => new InclusionValidator<T, Context>(binding, options, context);\n}\n\nexport function length<\n  Context extends object = object,\n  T extends ArrayLike<unknown> = ArrayLike<unknown>,\n>(\n  options: Computable<Context, LengthOptions>,\n  context?: Context,\n): Validator<T, Context, LengthOptions> {\n  return (binding: Binding) => new LengthValidator<T, Context>(binding, options, context);\n}\n\nexport function number<Context extends object = object>(\n  options: Computable<Context, NumberOptions>,\n  context?: Context,\n): Validator<number, Context, NumberOptions> {\n  return (binding: Binding) => new NumberValidator<Context>(binding, options, context);\n}\n\nexport function password<Context extends object = object>(\n  options: Computable<Context, PasswordOptions>,\n  context?: Context,\n): Validator<string, Context, PasswordOptions> {\n  return (binding: Binding) => new PasswordValidator<Context>(binding, options, context);\n}\n\nexport function phone<Context extends object = object>(\n  options: Computable<Context, PhoneOptions>,\n  context?: Context,\n): Validator<string, Context, PhoneOptions> {\n  return (binding: Binding) => new PhoneValidator<Context>(binding, options, context);\n}\n\nexport function presence<Context extends object = object, T = unknown>(\n  options: Computable<Context, PresenceOptions>,\n  context?: Context,\n): Validator<T, Context, PresenceOptions> {\n  return (binding: Binding) => new PresenceValidator<T, Context>(binding, options, context);\n}\n\nexport function range<Context extends object = object>(\n  options: Computable<Context, RangeOptions>,\n  context?: Context,\n): Validator<number, Context, RangeOptions> {\n  return (binding: Binding) => new RangeValidator<Context>(binding, options, context);\n}\n\nexport function regex<Context extends object = object>(\n  options: Computable<Context, RegexOptions>,\n  context?: Context,\n): Validator<string, Context, RegexOptions> {\n  return (binding: Binding) => new RegexValidator<Context>(binding, options, context);\n}\n"],"names":["validator","type","options","context","confirmation","custom","email","exclusion","file","inclusion","length","number","phone","presence","range","regex","password","Error","binding","ConfirmationValidator","CustomValidator","EmailValidator","ExclusionValidator","FileValidator","InclusionValidator","LengthValidator","NumberValidator","PasswordValidator","PhoneValidator","PresenceValidator","RangeValidator","RegexValidator"],"mappings":";;;;;;;;;;;;;;AAwDO,SAASA,SAASA,CAKvB,GAAG,CAACC,IAAI,EAAEC,OAAO,EAAEC,OAAO,CAA8B,EACb;EAC3C,IAAIF,IAAI,KAAK,cAAc,EAAE;AAC3B,IAAA,OAAOG,YAAY,CAACF,OAAO,EAAEC,OAAO,CAAC;AACvC,EAAA;EAEA,IAAIF,IAAI,KAAK,QAAQ,EAAE;AACrB,IAAA,OAAOI,MAAM,CAACH,OAAO,EAA+BC,OAAO,CAAC;AAC9D,EAAA;EAEA,IAAIF,IAAI,KAAK,OAAO,EAAE;AACpB,IAAA,OAAOK,KAAK,CAACJ,OAAO,EAAEC,OAAO,CAAC;AAChC,EAAA;EAEA,IAAIF,IAAI,KAAK,WAAW,EAAE;AACxB,IAAA,OAAOM,SAAS,CAACL,OAAO,EAAEC,OAAO,CAAC;AACpC,EAAA;EAEA,IAAIF,IAAI,KAAK,MAAM,EAAE;AACnB,IAAA,OAAOO,IAAI,CAACN,OAAO,EAAEC,OAAO,CAAC;AAC/B,EAAA;EAEA,IAAIF,IAAI,KAAK,WAAW,EAAE;AACxB,IAAA,OAAOQ,SAAS,CAACP,OAAO,EAAEC,OAAO,CAAC;AACpC,EAAA;EAEA,IAAIF,IAAI,KAAK,QAAQ,EAAE;AACrB,IAAA,OAAOS,MAAM,CAACR,OAAO,EAAEC,OAAO,CAAC;AACjC,EAAA;EAEA,IAAIF,IAAI,KAAK,QAAQ,EAAE;AACrB,IAAA,OAAOU,MAAM,CAACT,OAAO,EAAEC,OAAO,CAAC;AACjC,EAAA;EAEA,IAAIF,IAAI,KAAK,OAAO,EAAE;AACpB,IAAA,OAAOW,KAAK,CAACV,OAAO,EAAEC,OAAO,CAAC;AAChC,EAAA;EAEA,IAAIF,IAAI,KAAK,UAAU,EAAE;AACvB,IAAA,OAAOY,QAAQ,CAACX,OAAO,EAAEC,OAAO,CAAC;AACnC,EAAA;EAEA,IAAIF,IAAI,KAAK,OAAO,EAAE;AACpB,IAAA,OAAOa,KAAK,CAACZ,OAAO,EAAEC,OAAO,CAAC;AAChC,EAAA;EAEA,IAAIF,IAAI,KAAK,OAAO,EAAE;AACpB,IAAA,OAAOc,KAAK,CAACb,OAAO,EAAEC,OAAO,CAAC;AAChC,EAAA;EAEA,IAAIF,IAAI,KAAK,UAAU,EAAE;AACvB,IAAA,OAAOe,QAAQ,CAACd,OAAO,EAAEC,OAAO,CAAC;AACnC,EAAA;AAEA,EAAA,MAAM,IAAIc,KAAK,CAAC,CAAA,wBAAA,EAA2BhB,IAAI,EAAE,CAAC;AACpD;AAEO,SAASG,YAAYA,CAC1BF,OAAiD,EACjDC,OAAiB,EAC4C;EAC7D,OAAQe,OAAgB,IAAK,IAAIC,qBAAqB,CAAUD,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AAC5F;AAEO,SAASE,MAAMA,CACpBH,OAAuD,EACvDC,OAAiB,EACiC;EAClD,OAAQe,OAAgB,IAAK,IAAIE,eAAe,CAAaF,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AACzF;AAEO,SAASG,KAAKA,CACnBJ,OAA0C,EAC1CC,OAAiB,EACyB;EAC1C,OAAQe,OAAgB,IAAK,IAAIG,cAAc,CAAUH,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AACrF;AAEO,SAASI,SAASA,CACvBL,OAAiD,EACjDC,OAAiB,EAC2B;EAC5C,OAAQe,OAAgB,IAAK,IAAII,kBAAkB,CAAaJ,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AAC5F;AAEO,SAASK,IAAIA,CAClBN,OAAyC,EACzCC,OAAiB,EAC+B;EAChD,OAAQe,OAAgB,IAAK,IAAIK,aAAa,CAAUL,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AACpF;AAEO,SAASM,SAASA,CACvBP,OAAiD,EACjDC,OAAiB,EAC2B;EAC5C,OAAQe,OAAgB,IAAK,IAAIM,kBAAkB,CAAaN,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AAC5F;AAEO,SAASO,MAAMA,CAIpBR,OAA2C,EAC3CC,OAAiB,EACqB;EACtC,OAAQe,OAAgB,IAAK,IAAIO,eAAe,CAAaP,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AACzF;AAEO,SAASQ,MAAMA,CACpBT,OAA2C,EAC3CC,OAAiB,EAC0B;EAC3C,OAAQe,OAAgB,IAAK,IAAIQ,eAAe,CAAUR,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AACtF;AAEO,SAASa,QAAQA,CACtBd,OAA6C,EAC7CC,OAAiB,EAC4B;EAC7C,OAAQe,OAAgB,IAAK,IAAIS,iBAAiB,CAAUT,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AACxF;AAEO,SAASS,KAAKA,CACnBV,OAA0C,EAC1CC,OAAiB,EACyB;EAC1C,OAAQe,OAAgB,IAAK,IAAIU,cAAc,CAAUV,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AACrF;AAEO,SAASU,QAAQA,CACtBX,OAA6C,EAC7CC,OAAiB,EACuB;EACxC,OAAQe,OAAgB,IAAK,IAAIW,iBAAiB,CAAaX,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AAC3F;AAEO,SAASW,KAAKA,CACnBZ,OAA0C,EAC1CC,OAAiB,EACyB;EAC1C,OAAQe,OAAgB,IAAK,IAAIY,cAAc,CAAUZ,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AACrF;AAEO,SAASY,KAAKA,CACnBb,OAA0C,EAC1CC,OAAiB,EACyB;EAC1C,OAAQe,OAAgB,IAAK,IAAIa,cAAc,CAAUb,OAAO,EAAEhB,OAAO,EAAEC,OAAO,CAAC;AACrF;;;;"}