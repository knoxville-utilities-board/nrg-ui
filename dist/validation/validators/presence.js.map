{"version":3,"file":"presence.js","sources":["../../../src/validation/validators/presence.ts"],"sourcesContent":["import { assert } from '@ember/debug';\nimport { isEmpty, isPresent } from '@ember/utils';\nimport { tKey } from 'ember-intl';\n\nimport BaseValidator from './base.ts';\n\nimport type { Binding } from '../../index.ts';\nimport type { BaseOptions, Computable, ValidateFnResponse } from '../types';\n\nexport type PresenceOptions = {\n  /**\n   * If `true`, the value must be present.\n   * If `false`, the value must be blank.\n   */\n  presence: boolean;\n  /**\n   * Allow empty strings to be considered blank\n   * @default true\n   */\n  ignoreBlank?: boolean;\n} & BaseOptions;\n\nexport default class PresenceValidator<\n  T,\n  Context extends object = Record<string, unknown>,\n> extends BaseValidator<T, Context, PresenceOptions> {\n  defaultOptions = {\n    presence: true,\n    ignoreBlank: true,\n  };\n\n  constructor(binding: Binding, options: Computable<Context, PresenceOptions>, context?: Context) {\n    super(binding, options, context);\n\n    assert('PresenceValidator requires `presence` to be provided', options.presence !== undefined);\n  }\n\n  validate(value: T, options: PresenceOptions): ValidateFnResponse {\n    const { presence, ignoreBlank } = options;\n    const hasValue = ignoreBlank ? isPresent(value) : !isEmpty(value);\n\n    if (presence === true && !hasValue) {\n      return { key: tKey('nrg.validation.presence.blank') };\n    }\n\n    if (presence === false && hasValue) {\n      return { key: tKey('nrg.validation.presence.notBlank') };\n    }\n\n    return true;\n  }\n}\n"],"names":["PresenceValidator","BaseValidator","defaultOptions","presence","ignoreBlank","constructor","binding","options","context","assert","undefined","validate","value","hasValue","isPresent","isEmpty","key","tKey"],"mappings":";;;;;AAsBe,MAAMA,iBAAiB,SAG5BC,aAAa,CAA8B;AACnDC,EAAAA,cAAc,GAAG;AACfC,IAAAA,QAAQ,EAAE,IAAI;AACdC,IAAAA,WAAW,EAAE;GACd;AAEDC,EAAAA,WAAWA,CAACC,OAAgB,EAAEC,OAA6C,EAAEC,OAAiB,EAAE;AAC9F,IAAA,KAAK,CAACF,OAAO,EAAEC,OAAO,EAAEC,OAAO,CAAC;IAEhCC,MAAM,CAAC,sDAAsD,EAAEF,OAAO,CAACJ,QAAQ,KAAKO,SAAS,CAAC;AAChG,EAAA;AAEAC,EAAAA,QAAQA,CAACC,KAAQ,EAAEL,OAAwB,EAAsB;IAC/D,MAAM;MAAEJ,QAAQ;AAAEC,MAAAA;AAAY,KAAC,GAAGG,OAAO;AACzC,IAAA,MAAMM,QAAQ,GAAGT,WAAW,GAAGU,SAAS,CAACF,KAAK,CAAC,GAAG,CAACG,OAAO,CAACH,KAAK,CAAC;AAEjE,IAAA,IAAIT,QAAQ,KAAK,IAAI,IAAI,CAACU,QAAQ,EAAE;MAClC,OAAO;QAAEG,GAAG,EAAEC,IAAI,CAAC,+BAA+B;OAAG;AACvD,IAAA;AAEA,IAAA,IAAId,QAAQ,KAAK,KAAK,IAAIU,QAAQ,EAAE;MAClC,OAAO;QAAEG,GAAG,EAAEC,IAAI,CAAC,kCAAkC;OAAG;AAC1D,IAAA;AAEA,IAAA,OAAO,IAAI;AACb,EAAA;AACF;;;;"}