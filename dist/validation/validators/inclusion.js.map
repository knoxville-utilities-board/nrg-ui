{"version":3,"file":"inclusion.js","sources":["../../../src/validation/validators/inclusion.ts"],"sourcesContent":["import { assert } from '@ember/debug';\nimport { tKey } from 'ember-intl';\n\nimport BaseValidator from './base.ts';\n\nimport type { Binding, Primitive } from '../../index.ts';\nimport type { BaseOptions, Computable, ValidateFnResponse } from '../types';\n\nexport type InclusionOptions<T> = {\n  /**\n   * An array of valid values.\n   */\n  in: T[];\n} & BaseOptions;\n\nexport default class InclusionValidator<\n  T extends Primitive,\n  Context extends object = Record<string, unknown>,\n> extends BaseValidator<T, Context, InclusionOptions<T>> {\n  constructor(\n    binding: Binding,\n    options: Computable<Context, InclusionOptions<T>>,\n    context?: Context,\n  ) {\n    super(binding, options, context);\n\n    const { in: validValues } = options;\n\n    assert(\n      'InclusionValidator requires an array of valid values to be provided',\n      validValues !== undefined,\n    );\n\n    assert(\n      'InclusionValidator requires an array of valid values to be provided',\n      validValues.length > 0,\n    );\n  }\n\n  validate(value: T, options: InclusionOptions<T>): ValidateFnResponse {\n    const { in: validValues } = options;\n\n    if (validValues.includes(value)) {\n      return true;\n    }\n\n    const validValuesList = this.intl.formatList(validValues.map(String));\n\n    return {\n      key: tKey('nrg.validation.inclusion.in'),\n      value,\n      in: validValuesList,\n    };\n  }\n}\n"],"names":["InclusionValidator","BaseValidator","constructor","binding","options","context","in","validValues","assert","undefined","length","validate","value","includes","validValuesList","intl","formatList","map","String","key","tKey"],"mappings":";;;;AAee,MAAMA,kBAAkB,SAG7BC,aAAa,CAAkC;AACvDC,EAAAA,WAAWA,CACTC,OAAgB,EAChBC,OAAiD,EACjDC,OAAiB,EACjB;AACA,IAAA,KAAK,CAACF,OAAO,EAAEC,OAAO,EAAEC,OAAO,CAAC;IAEhC,MAAM;AAAEC,MAAAA,EAAE,EAAEC;AAAY,KAAC,GAAGH,OAAO;AAEnCI,IAAAA,MAAM,CACJ,qEAAqE,EACrED,WAAW,KAAKE,SAClB,CAAC;IAEDD,MAAM,CACJ,qEAAqE,EACrED,WAAW,CAACG,MAAM,GAAG,CACvB,CAAC;AACH,EAAA;AAEAC,EAAAA,QAAQA,CAACC,KAAQ,EAAER,OAA4B,EAAsB;IACnE,MAAM;AAAEE,MAAAA,EAAE,EAAEC;AAAY,KAAC,GAAGH,OAAO;AAEnC,IAAA,IAAIG,WAAW,CAACM,QAAQ,CAACD,KAAK,CAAC,EAAE;AAC/B,MAAA,OAAO,IAAI;AACb,IAAA;AAEA,IAAA,MAAME,eAAe,GAAG,IAAI,CAACC,IAAI,CAACC,UAAU,CAACT,WAAW,CAACU,GAAG,CAACC,MAAM,CAAC,CAAC;IAErE,OAAO;AACLC,MAAAA,GAAG,EAAEC,IAAI,CAAC,6BAA6B,CAAC;MACxCR,KAAK;AACLN,MAAAA,EAAE,EAAEQ;KACL;AACH,EAAA;AACF;;;;"}