{"version":3,"file":"regex.js","sources":["../../../src/validation/validators/regex.ts"],"sourcesContent":["import { assert } from '@ember/debug';\nimport { isNone } from '@ember/utils';\n\nimport BaseValidator from './base.ts';\n\nimport type { Binding } from '../../index.ts';\nimport type { BaseOptions, Computable, ValidateFnResponse } from '../types';\n\nexport type RegexOptions = {\n  /**\n   * If `true`, the value must not match the pattern.\n   * @default false\n   */\n  inverse?: boolean;\n  /**\n   * A regular expression pattern that the value must match.\n   */\n  pattern: RegExp | string;\n} & BaseOptions;\n\nexport default class RegexValidator<\n  Context extends object = Record<string, unknown>,\n> extends BaseValidator<string, Context, RegexOptions> {\n  constructor(binding: Binding, options: Computable<Context, RegexOptions>, context?: Context) {\n    super(binding, options, context);\n\n    const { pattern } = options;\n\n    assert('RegexValidator requires `pattern` to be provided', !isNone(pattern));\n  }\n\n  validate(value: string, options: RegexOptions): ValidateFnResponse {\n    const { inverse = false, pattern } = options;\n\n    assert('RegexValidator requires a pattern to be provided', !isNone(pattern));\n\n    assert(\n      'RegexValidator requires the pattern to be of type string or RegExp',\n      typeof pattern === 'string' || pattern instanceof RegExp,\n    );\n\n    const regex = typeof pattern === 'string' ? new RegExp(pattern) : pattern;\n    const isValid = regex.test(value) === !inverse;\n\n    if (isValid) {\n      return true;\n    }\n\n    const messageType = inverse ? 'match' : 'doesNotMatch';\n\n    return {\n      key: `nrg.validation.regex.${messageType}`,\n      value,\n      inverse,\n      pattern: regex.toString(),\n    };\n  }\n}\n"],"names":["RegexValidator","BaseValidator","constructor","binding","options","context","pattern","assert","isNone","validate","value","inverse","RegExp","regex","isValid","test","messageType","key","toString"],"mappings":";;;;AAoBe,MAAMA,cAAc,SAEzBC,aAAa,CAAgC;AACrDC,EAAAA,WAAWA,CAACC,OAAgB,EAAEC,OAA0C,EAAEC,OAAiB,EAAE;AAC3F,IAAA,KAAK,CAACF,OAAO,EAAEC,OAAO,EAAEC,OAAO,CAAC;IAEhC,MAAM;AAAEC,MAAAA;AAAQ,KAAC,GAAGF,OAAO;IAE3BG,MAAM,CAAC,kDAAkD,EAAE,CAACC,MAAM,CAACF,OAAO,CAAC,CAAC;AAC9E,EAAA;AAEAG,EAAAA,QAAQA,CAACC,KAAa,EAAEN,OAAqB,EAAsB;IACjE,MAAM;AAAEO,MAAAA,OAAO,GAAG,KAAK;AAAEL,MAAAA;AAAQ,KAAC,GAAGF,OAAO;IAE5CG,MAAM,CAAC,kDAAkD,EAAE,CAACC,MAAM,CAACF,OAAO,CAAC,CAAC;IAE5EC,MAAM,CACJ,oEAAoE,EACpE,OAAOD,OAAO,KAAK,QAAQ,IAAIA,OAAO,YAAYM,MACpD,CAAC;AAED,IAAA,MAAMC,KAAK,GAAG,OAAOP,OAAO,KAAK,QAAQ,GAAG,IAAIM,MAAM,CAACN,OAAO,CAAC,GAAGA,OAAO;IACzE,MAAMQ,OAAO,GAAGD,KAAK,CAACE,IAAI,CAACL,KAAK,CAAC,KAAK,CAACC,OAAO;AAE9C,IAAA,IAAIG,OAAO,EAAE;AACX,MAAA,OAAO,IAAI;AACb,IAAA;AAEA,IAAA,MAAME,WAAW,GAAGL,OAAO,GAAG,OAAO,GAAG,cAAc;IAEtD,OAAO;MACLM,GAAG,EAAE,CAAA,qBAAA,EAAwBD,WAAW,CAAA,CAAE;MAC1CN,KAAK;MACLC,OAAO;AACPL,MAAAA,OAAO,EAAEO,KAAK,CAACK,QAAQ;KACxB;AACH,EAAA;AACF;;;;"}