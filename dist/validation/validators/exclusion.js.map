{"version":3,"file":"exclusion.js","sources":["../../../src/validation/validators/exclusion.ts"],"sourcesContent":["import { assert } from '@ember/debug';\nimport { tKey } from 'ember-intl';\n\nimport BaseValidator from './base.ts';\n\nimport type { Binding, Primitive } from '../../index.ts';\nimport type { BaseOptions, Computable, ValidateFnResponse } from '../types';\n\nexport type ExclusionOptions<T> = {\n  /**\n   * An array of invalid values.\n   */\n  in: T[];\n} & BaseOptions;\n\nexport default class ExclusionValidator<\n  T extends Primitive,\n  Context extends object = Record<string, unknown>,\n> extends BaseValidator<T, Context, ExclusionOptions<T>> {\n  constructor(bind: Binding, options: Computable<Context, ExclusionOptions<T>>, context?: Context) {\n    super(bind, options, context);\n\n    const { in: invalidValues } = options;\n\n    assert(\n      'ExclusionValidator requires an array of invalid values to be provided',\n      invalidValues !== undefined,\n    );\n\n    assert(\n      'ExclusionValidator requires an array of invalid values to be provided',\n      invalidValues.length > 0,\n    );\n  }\n\n  validate(value: T, options: ExclusionOptions<T>): ValidateFnResponse {\n    const { in: invalidValues } = options;\n\n    if (!invalidValues.includes(value)) {\n      return true;\n    }\n\n    const invalidValuesList = this.intl.formatList(invalidValues.map(String));\n\n    return {\n      key: tKey('nrg.validation.exclusion.in'),\n      value,\n      in: invalidValuesList,\n    };\n  }\n}\n"],"names":["ExclusionValidator","BaseValidator","constructor","bind","options","context","in","invalidValues","assert","undefined","length","validate","value","includes","invalidValuesList","intl","formatList","map","String","key","tKey"],"mappings":";;;;AAee,MAAMA,kBAAkB,SAG7BC,aAAa,CAAkC;AACvDC,EAAAA,WAAWA,CAACC,IAAa,EAAEC,OAAiD,EAAEC,OAAiB,EAAE;AAC/F,IAAA,KAAK,CAACF,IAAI,EAAEC,OAAO,EAAEC,OAAO,CAAC;IAE7B,MAAM;AAAEC,MAAAA,EAAE,EAAEC;AAAc,KAAC,GAAGH,OAAO;AAErCI,IAAAA,MAAM,CACJ,uEAAuE,EACvED,aAAa,KAAKE,SACpB,CAAC;IAEDD,MAAM,CACJ,uEAAuE,EACvED,aAAa,CAACG,MAAM,GAAG,CACzB,CAAC;AACH,EAAA;AAEAC,EAAAA,QAAQA,CAACC,KAAQ,EAAER,OAA4B,EAAsB;IACnE,MAAM;AAAEE,MAAAA,EAAE,EAAEC;AAAc,KAAC,GAAGH,OAAO;AAErC,IAAA,IAAI,CAACG,aAAa,CAACM,QAAQ,CAACD,KAAK,CAAC,EAAE;AAClC,MAAA,OAAO,IAAI;AACb,IAAA;AAEA,IAAA,MAAME,iBAAiB,GAAG,IAAI,CAACC,IAAI,CAACC,UAAU,CAACT,aAAa,CAACU,GAAG,CAACC,MAAM,CAAC,CAAC;IAEzE,OAAO;AACLC,MAAAA,GAAG,EAAEC,IAAI,CAAC,6BAA6B,CAAC;MACxCR,KAAK;AACLN,MAAAA,EAAE,EAAEQ;KACL;AACH,EAAA;AACF;;;;"}