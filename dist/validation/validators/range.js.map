{"version":3,"file":"range.js","sources":["../../../src/validation/validators/range.ts"],"sourcesContent":["import { assert } from '@ember/debug';\nimport { isPresent } from '@ember/utils';\nimport { tKey } from 'ember-intl';\n\nimport BaseValidator from './base.ts';\n\nimport type { Binding } from '../../index.ts';\nimport type { BaseOptions, Computable, ValidateFnResponse } from '../types';\n\nexport type RangeOptions = {\n  /**\n   * The minimum value allowed.\n   */\n  min?: number;\n  /**\n   * Whether the value can be equal to the minimum value.\n   * @default true\n   */\n  minInclusive?: boolean;\n  /**\n   * The maximum value allowed.\n   */\n  max?: number;\n  /**\n   * Whether the value can be equal to the maximum value.\n   * @default true\n   */\n  maxInclusive?: boolean;\n} & BaseOptions;\n\nexport default class RangeValidator<\n  Context extends object = Record<string, unknown>,\n> extends BaseValidator<number, Context, RangeOptions> {\n  defaultOptions = {\n    minInclusive: true,\n    maxInclusive: true,\n  };\n\n  constructor(binding: Binding, options: Computable<Context, RangeOptions>, context?: Context) {\n    super(binding, options, context);\n\n    assert(\n      'RangeValidator requires at least one of `min` and `max` to be provided',\n      isPresent(options.min) || isPresent(options.max),\n    );\n  }\n\n  validate(value: number, options: RangeOptions): ValidateFnResponse {\n    const { min, minInclusive, max, maxInclusive } = options;\n\n    if (Number.isNaN(value)) {\n      return {\n        key: tKey('nrg.validation.range.notANumber'),\n      };\n    }\n\n    let key = null;\n\n    if (min !== undefined) {\n      if (minInclusive && value < min) {\n        key = tKey('nrg.validation.range.greaterThanOrEqualTo');\n      } else if (!minInclusive && value <= min) {\n        key = tKey('nrg.validation.range.greaterThan');\n      }\n    }\n    if (max !== undefined) {\n      if (maxInclusive && value > max) {\n        key = tKey('nrg.validation.range.lessThanOrEqualTo');\n      } else if (!maxInclusive && value >= max) {\n        key = tKey('nrg.validation.range.lessThan');\n      }\n    }\n\n    if (key) {\n      return { key, min, max };\n    }\n\n    return true;\n  }\n}\n"],"names":["RangeValidator","BaseValidator","defaultOptions","minInclusive","maxInclusive","constructor","binding","options","context","assert","isPresent","min","max","validate","value","Number","isNaN","key","tKey","undefined"],"mappings":";;;;;AA8Be,MAAMA,cAAc,SAEzBC,aAAa,CAAgC;AACrDC,EAAAA,cAAc,GAAG;AACfC,IAAAA,YAAY,EAAE,IAAI;AAClBC,IAAAA,YAAY,EAAE;GACf;AAEDC,EAAAA,WAAWA,CAACC,OAAgB,EAAEC,OAA0C,EAAEC,OAAiB,EAAE;AAC3F,IAAA,KAAK,CAACF,OAAO,EAAEC,OAAO,EAAEC,OAAO,CAAC;AAEhCC,IAAAA,MAAM,CACJ,wEAAwE,EACxEC,SAAS,CAACH,OAAO,CAACI,GAAG,CAAC,IAAID,SAAS,CAACH,OAAO,CAACK,GAAG,CACjD,CAAC;AACH,EAAA;AAEAC,EAAAA,QAAQA,CAACC,KAAa,EAAEP,OAAqB,EAAsB;IACjE,MAAM;MAAEI,GAAG;MAAER,YAAY;MAAES,GAAG;AAAER,MAAAA;AAAa,KAAC,GAAGG,OAAO;AAExD,IAAA,IAAIQ,MAAM,CAACC,KAAK,CAACF,KAAK,CAAC,EAAE;MACvB,OAAO;QACLG,GAAG,EAAEC,IAAI,CAAC,iCAAiC;OAC5C;AACH,IAAA;IAEA,IAAID,GAAG,GAAG,IAAI;IAEd,IAAIN,GAAG,KAAKQ,SAAS,EAAE;AACrB,MAAA,IAAIhB,YAAY,IAAIW,KAAK,GAAGH,GAAG,EAAE;AAC/BM,QAAAA,GAAG,GAAGC,IAAI,CAAC,2CAA2C,CAAC;MACzD,CAAC,MAAM,IAAI,CAACf,YAAY,IAAIW,KAAK,IAAIH,GAAG,EAAE;AACxCM,QAAAA,GAAG,GAAGC,IAAI,CAAC,kCAAkC,CAAC;AAChD,MAAA;AACF,IAAA;IACA,IAAIN,GAAG,KAAKO,SAAS,EAAE;AACrB,MAAA,IAAIf,YAAY,IAAIU,KAAK,GAAGF,GAAG,EAAE;AAC/BK,QAAAA,GAAG,GAAGC,IAAI,CAAC,wCAAwC,CAAC;MACtD,CAAC,MAAM,IAAI,CAACd,YAAY,IAAIU,KAAK,IAAIF,GAAG,EAAE;AACxCK,QAAAA,GAAG,GAAGC,IAAI,CAAC,+BAA+B,CAAC;AAC7C,MAAA;AACF,IAAA;AAEA,IAAA,IAAID,GAAG,EAAE;MACP,OAAO;QAAEA,GAAG;QAAEN,GAAG;AAAEC,QAAAA;OAAK;AAC1B,IAAA;AAEA,IAAA,OAAO,IAAI;AACb,EAAA;AACF;;;;"}