{"version":3,"file":"sidebar.js","sources":["../../src/components/sidebar.gts"],"sourcesContent":["import { assert } from '@ember/debug';\nimport { hash } from '@ember/helper';\nimport { on } from '@ember/modifier';\nimport { LinkTo } from '@ember/routing';\nimport Component from '@glimmer/component';\n\nimport { classes } from '../helpers/classes.ts';\n\nimport type { TOC } from '@ember/component/template-only';\nimport type Owner from '@ember/owner';\nimport type { ComponentLike, WithBoundArgs } from '@glint/template';\n\ninterface LinkToArgs {\n  active?: boolean;\n  activeClass?: string;\n  'current-when'?: string | boolean;\n  disabled?: boolean;\n  model?: unknown;\n  models?: unknown[];\n  query?: Record<string, unknown>;\n  replace?: boolean;\n  route?: string;\n}\n\nexport interface ItemSignature {\n  Element: HTMLAnchorElement | HTMLDivElement;\n  Args: LinkToArgs & {\n    header?: boolean;\n    url?: string;\n\n    onClick?: (evt: MouseEvent) => unknown;\n    onClickInternal?: (evt: MouseEvent) => unknown;\n  };\n  Blocks: {\n    badge: [];\n    default: [];\n  };\n}\n\nexport class Item extends Component<ItemSignature> {\n  constructor(owner: Owner, args: ItemSignature['Args']) {\n    super(owner, args);\n    assert(\n      'You cannot provide both the `@model` and `@models` arguments to the <Item> component.',\n      (!args.models && args.model) || (args.models && !args.model) || (!args.model && !args.models),\n    );\n  }\n\n  get classes() {\n    const hasRoute = Boolean(this.args.route);\n    const hasUrl = Boolean(this.args.url);\n    const hasClickListener = Boolean(this.args.onClick) && !this.args.disabled;\n    const canBeClicked = hasRoute || hasUrl || hasClickListener;\n\n    return classes(\n      'item list-group-item d-flex justify-content-between align-items-center',\n      this.args.active ? 'active' : '',\n      this.args.disabled ? 'disabled' : '',\n      this.args.header ? 'header' : '',\n      canBeClicked ? 'list-group-item-action' : '',\n    );\n  }\n\n  get models() {\n    if (this.args.model) {\n      return [this.args.model];\n    } else if (this.args.models) {\n      return this.args.models;\n    }\n    return [];\n  }\n\n  get query() {\n    return this.args.query ?? {};\n  }\n\n  onClick = (evt: MouseEvent) => {\n    if (this.args.active || this.args.disabled) {\n      return;\n    }\n\n    this.args.onClick?.(evt);\n    this.args.onClickInternal?.(evt);\n  };\n\n  <template>\n    {{#if @route}}\n      <LinkTo\n        class={{this.classes}}\n        @activeClass={{@activeClass}}\n        @current-when={{@current-when}}\n        @disabled={{@disabled}}\n        @models={{this.models}}\n        @query={{this.query}}\n        @replace={{@replace}}\n        @route={{@route}}\n        ...attributes\n      >\n        <span>\n          {{yield}}\n        </span>\n        <span class=\"d-flex\">\n          {{#if (has-block \"badge\")}}\n            <span class=\"badge rounded-pill\">\n              {{yield to=\"badge\"}}\n            </span>\n          {{/if}}\n        </span>\n      </LinkTo>\n    {{else if @url}}\n      <a class={{this.classes}} href={{@url}} ...attributes>\n        <span>\n          {{yield}}\n        </span>\n        <span class=\"d-flex\">\n          <i class=\"bi bi-box-arrow-up-right text-body external-icon\"></i>\n          {{#if (has-block \"badge\")}}\n            <span class=\"badge rounded-pill\">\n              {{yield to=\"badge\"}}\n            </span>\n          {{/if}}\n        </span>\n      </a>\n    {{else}}\n      <div\n        class={{this.classes}}\n        {{! @glint-expect-error - Known Glint issue - #661 }}\n        {{(if @onClick (modifier on \"click\" this.onClick))}}\n        ...attributes\n      >\n        <span>\n          {{yield}}\n        </span>\n        <span class=\"d-flex\">\n          {{#if (has-block \"badge\")}}\n            <span class=\"badge rounded-pill\">\n              {{yield to=\"badge\"}}\n            </span>\n          {{/if}}\n        </span>\n      </div>\n    {{/if}}\n  </template>\n}\n\nexport interface GroupSignature {\n  Element: HTMLAnchorElement | HTMLDivElement;\n  Args: LinkToArgs & {\n    url?: string;\n\n    onClick?: (evt: MouseEvent) => unknown;\n    onClickInternal?: (evt: MouseEvent) => unknown;\n  };\n  Blocks: {\n    badge: [];\n    header: [];\n    items: [ComponentLike<ItemSignature>];\n  };\n}\n\nexport class Group extends Component<GroupSignature> {\n  constructor(owner: Owner, args: GroupSignature['Args']) {\n    super(owner, args);\n    assert(\n      'You cannot provide both the `@model` and `@models` arguments to the <Group> component.',\n      (!args.models && args.model) || (args.models && !args.model) || (!args.model && !args.models),\n    );\n  }\n\n  get classes() {\n    const hasRoute = Boolean(this.args.route);\n    const hasUrl = Boolean(this.args.url);\n    const hasClickListener = Boolean(this.args.onClick) && !this.args.disabled;\n    const canBeClicked = hasRoute || hasUrl || hasClickListener;\n\n    return classes(\n      'item list-group-item header d-flex justify-content-between align-items-center',\n      this.args.active ? 'active' : '',\n      this.args.disabled ? 'disabled' : '',\n      canBeClicked ? 'list-group-item-action' : '',\n    );\n  }\n\n  get models() {\n    if (this.args.model) {\n      return [this.args.model];\n    } else if (this.args.models) {\n      return this.args.models;\n    }\n    return [];\n  }\n\n  get query() {\n    return this.args.query ?? {};\n  }\n\n  onClick = (evt: MouseEvent) => {\n    if (this.args.active || this.args.disabled) {\n      return;\n    }\n\n    this.args.onClick?.(evt);\n    this.args.onClickInternal?.(evt);\n  };\n\n  <template>\n    {{#if (has-block \"header\")}}\n      {{#if @route}}\n        <LinkTo\n          class={{this.classes}}\n          @activeClass={{@activeClass}}\n          @current-when={{@current-when}}\n          @disabled={{@disabled}}\n          @models={{this.models}}\n          @query={{this.query}}\n          @replace={{@replace}}\n          @route={{@route}}\n          ...attributes\n        >\n          <span>\n            {{yield to=\"header\"}}\n          </span>\n          {{#if (has-block \"badge\")}}\n            <span class=\"badge rounded-pill\">\n              {{yield to=\"badge\"}}\n            </span>\n          {{/if}}\n        </LinkTo>\n      {{else if @url}}\n        <a class={{this.classes}} href={{@url}} ...attributes>\n          <span>\n            {{yield to=\"header\"}}\n          </span>\n          <span class=\"d-flex\">\n            <i class=\"bi bi-box-arrow-up-right text-body external-icon\"></i>\n            {{#if (has-block \"badge\")}}\n              <span class=\"badge rounded-pill\">\n                {{yield to=\"badge\"}}\n              </span>\n            {{/if}}\n          </span>\n        </a>\n      {{else}}\n        <div\n          class={{this.classes}}\n          {{! @glint-expect-error - Known Glint issue - #661 }}\n          {{(if @onClick (modifier on \"click\" this.onClick))}}\n          ...attributes\n        >\n          <span>\n            {{yield to=\"header\"}}\n          </span>\n          <span class=\"d-flex\">\n            {{#if (has-block \"badge\")}}\n              <span class=\"badge rounded-pill\">\n                {{yield to=\"badge\"}}\n              </span>\n            {{/if}}\n          </span>\n        </div>\n      {{/if}}\n    {{/if}}\n    {{#if (has-block \"items\")}}\n      {{yield (component Item onClickInternal=@onClickInternal) to=\"items\"}}\n    {{/if}}\n  </template>\n}\n\nexport interface SidebarSignature {\n  Element: HTMLDivElement;\n  Args: {\n    sticky?: boolean;\n\n    onClickInternal?: (evt: MouseEvent) => unknown;\n  };\n  Blocks: {\n    default: [\n      {\n        Group: WithBoundArgs<typeof Group, 'onClickInternal'>;\n        Item: WithBoundArgs<typeof Item, 'header' | 'onClickInternal'>;\n      },\n    ];\n    footer: [WithBoundArgs<typeof Item, 'onClickInternal'>];\n  };\n}\n\nconst Sidebar: TOC<SidebarSignature> = <template>\n  <div class=\"sidebar card justify-content-between overflow-auto\" ...attributes>\n    <div class=\"list-group d-flex flex-column\">\n      {{yield\n        (hash\n          Group=(component Group onClickInternal=@onClickInternal)\n          Item=(component Item header=true onClickInternal=@onClickInternal)\n        )\n      }}\n    </div>\n    {{#if (has-block \"footer\")}}\n      <div class=\"list-group d-flex flex-column footer\">\n        {{yield (component Item onClickInternal=@onClickInternal) to=\"footer\"}}\n      </div>\n    {{/if}}\n  </div>\n</template>;\n\nexport default Sidebar;\n"],"names":["Item","Component","constructor","owner","args","assert","models","model","classes","hasRoute","Boolean","route","hasUrl","url","hasClickListener","onClick","disabled","canBeClicked","active","header","query","evt","onClickInternal","setComponentTemplate","precompileTemplate","strictMode","scope","LinkTo","on","Group","Sidebar","hash","templateOnly"],"mappings":"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"}