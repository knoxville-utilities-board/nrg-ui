{"version":3,"file":"actions.js","sources":["../../../src/components/component-api/actions.gts"],"sourcesContent":["import { helper } from '@ember/component/helper';\nimport { array } from '@ember/helper';\nimport Component from '@glimmer/component';\n\nimport { createLink } from '../../utils.ts';\nimport CodeBlock, { TypeCodeBlock } from '../code-block.gts';\nimport ApiLink from './api-link.gts';\n\nimport type { TOC } from '@ember/component/template-only';\nimport type { ComponentLike, HelperLike, WithBoundArgs } from '@glint/template';\n\nexport interface ParamHelperSignature {\n  Args: {\n    Positional: [string];\n    Named: Omit<ActionParameter, 'name'>;\n  };\n  Return: ActionParameter;\n}\n\nexport const param = helper<ParamHelperSignature>(([name], { type, description }) => {\n  return { name, type, description };\n});\n\nexport interface ActionParameter {\n  name: string;\n  type?: string;\n  description?: string;\n}\n\nexport interface BaseActionSignature {\n  Element: HTMLDivElement;\n  Args: {\n    description?: string;\n    name: string;\n    parameters?: (string | ActionParameter)[];\n    returnType?: string;\n\n    sectionName: string;\n    subsectionName: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nexport class BaseAction extends Component<BaseActionSignature> {\n  [key: string]: unknown;\n\n  get parameters(): ActionParameter[] {\n    const { parameters: args = [] } = this.args;\n\n    if (typeof args[0] === 'string') {\n      return args.map((arg) => (typeof arg === 'string' ? { name: arg } : arg));\n    }\n\n    return args as ActionParameter[];\n  }\n\n  get signature() {\n    const params = this.parameters\n      .map((param) => `${param.name}: ${param.type ?? 'any'}`)\n      .join(', ');\n\n    return `(${params}): ${this.args.returnType ?? 'void'}`;\n  }\n\n  hasValue(value: unknown): value is string {\n    return value !== undefined;\n  }\n\n  <template>\n    {{#let (createLink (array @sectionName @subsectionName \"actions\" @name)) as |link|}}\n      <h6 id={{link}}>\n        <a class=\"showcase-header\" href=\"#{{link}}\">\n          <CodeBlock @code={{@name}} @lang=\"plaintext\" @inline={{true}} />\n        </a>\n      </h6>\n    {{/let}}\n    <div class=\"action\" ...attributes>\n      <p class=\"signature\">\n        <TypeCodeBlock @code={{this.signature}} @showCopyButton={{false}} />\n      </p>\n      <p class=\"description\">\n        {{@description}}\n      </p>\n      {{#if this.parameters}}\n        <div class=\"arguments\">\n          <table class=\"table table-striped\">\n            <thead>\n              <tr>\n                <th class=\"name\">Name</th>\n                <th class=\"description\" colspan=\"2\">Description</th>\n              </tr>\n            </thead>\n            <tbody>\n              {{#each this.parameters as |param|}}\n                <tr>\n                  <td class=\"name\">\n                    {{param.name}}\n                  </td>\n                  <td class=\"type\">\n                    {{#if param.type}}\n                      <ApiLink @type={{param.type}} />\n                    {{/if}}\n                  </td>\n                  <td class=\"description\">\n                    {{param.description}}\n                  </td>\n                </tr>\n              {{/each}}\n            </tbody>\n          </table>\n        </div>\n      {{/if}}\n\n      {{yield}}\n    </div>\n  </template>\n}\n\nexport interface ActionsSignature {\n  Args: {\n    sectionName: string;\n    subsectionName: string;\n  };\n  Blocks: {\n    default: [\n      WithBoundArgs<ComponentLike<BaseActionSignature>, 'sectionName' | 'subsectionName'>,\n      HelperLike<ParamHelperSignature>,\n    ];\n  };\n}\n\nexport const Actions: TOC<ActionsSignature> = <template>\n  {{#let (createLink (array @sectionName @subsectionName \"actions\")) as |link|}}\n    <h5 class=\"mt-4\" id={{link}}>\n      <a class=\"showcase-header\" href=\"#{{link}}\">\n        Actions\n      </a>\n    </h5>\n  {{/let}}\n  {{yield (component BaseAction sectionName=@sectionName subsectionName=@subsectionName) param}}\n</template>;\n\nexport default Actions;\n"],"names":["param","helper","name","type","description","BaseAction","Component","parameters","args","map","arg","signature","params","join","returnType","hasValue","value","undefined","setComponentTemplate","precompileTemplate","strictMode","scope","createLink","array","CodeBlock","TypeCodeBlock","ApiLink","Actions","templateOnly"],"mappings":";;;;;;;;;;AAmBO,MAAMA,KAAA,GAAQC,MAAA,CAA6B,CAAC,CAACC,IAAA,CAAK,EAAE;EAAEC,IAAI;AAAEC,EAAAA;AAAW,CAAE,KAAA;EAC9E,OAAO;IAAEF,IAAA;IAAMC,IAAA;AAAMC,IAAAA;GAAY;AACnC,CAAA;AAwBO,MAAMC,mBAAmBC,SAAA,CAAU;EAGxC,IAAIC,aAAgC;IAClC,MAAM;MAAEA,YAAYC,IAAA,GAAO;KAAI,GAAG,IAAI,CAACA,IAAI;AAE3C,IAAA,IAAI,OAAOA,IAAI,CAAC,CAAA,CAAE,KAAK,QAAA,EAAU;MAC/B,OAAOA,IAAA,CAAKC,GAAG,CAAEC,OAAS,OAAOA,QAAQ,QAAA,GAAW;AAAER,QAAAA,IAAA,EAAMQ;OAAI,GAAIA,GAAG,CAAA;AACzE,IAAA;AAEA,IAAA,OAAOF,IAAA;AACT,EAAA;EAEA,IAAIG,SAAAA,GAAY;IACd,MAAMC,MAAA,GAAS,IAAI,CAACL,UAAU,CAC3BE,GAAG,CAAET,KAAA,IAAU,CAAA,EAAGA,MAAME,IAAI,CAAA,EAAA,EAAKF,KAAA,CAAMG,IAAI,IAAI,KAAA,CAAA,CAAO,CAAA,CACtDU,IAAI,CAAC,IAAA,CAAA;IAER,OAAO,CAAA,CAAA,EAAID,MAAA,CAAA,GAAA,EAAY,IAAI,CAACJ,IAAI,CAACM,UAAU,IAAI,QAAQ;AACzD,EAAA;EAEAC,QAAAA,CAASC,KAAc,EAAmB;IACxC,OAAOA,KAAA,KAAUC,SAAA;AACnB,EAAA;AAEA,EAAA;IAAAC,oBAAA,CAAAC,kBAAA,CAAA,oyCAAA,EA+CA;MAAAC,UAAA,EAAA,IAAA;AAAAC,MAAAA,KAAA,EAAAA,OAAA;QAAAC,UAAA;QAAAC,KAAA;QAAAC,SAAA;QAAAC,aAAA;AAAAC,QAAAA;AAAA,OAAA;KAAU,CAAA,EAAV,IAAW,CAAA;AAAD;AACZ;MAeaC,OAAa,GAAAT,oBAAA,CAAoBC,kBAAA,CAAA,uTAAA,EAS9C;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,UAAA;IAAAC,KAAA;IAAAlB,UAAA;AAAAL,IAAAA;AAAA,GAAA;AAAU,CAAA,CAAA,EAAA4B,YAAA,EAAA;;;;"}