{"version":3,"file":"api-link.js","sources":["../../../src/components/component-api/api-link.gts"],"sourcesContent":["import { getMdnLinkForApi } from '../../utils.ts';\nimport { TypeCodeBlock } from '../code-block.gts';\n\nimport type { TOC } from '@ember/component/template-only';\n\nexport interface ApiLinkSignature {\n  Element: HTMLAnchorElement;\n  Args: {\n    displayType?: string;\n    link?: string;\n    type: string;\n  };\n}\n\n/**\n * JavaScript provides wrapper classes for\n * certain primitive data types. These are rarely\n * used directly and display with Shiki differently\n * than their primitive counterparts.\n *\n * See https://typescript-eslint.io/rules/no-wrapper-object-types/ */\nconst WRAPPER_OBJECT_TYPES = ['String', 'Number', 'Boolean', 'Symbol', 'BigInt', 'Object'];\n\nfunction getDisplayType(type: string) {\n  if (WRAPPER_OBJECT_TYPES.includes(type)) {\n    return type.toLowerCase();\n  }\n\n  return type;\n}\n\nfunction getDocType(type: string) {\n  if (type.endsWith('[]')) {\n    type = type.slice(0, -2);\n  } else if (type.endsWith('<T>')) {\n    type = type.slice(0, -3);\n  } else if (type.startsWith('Array<') && type.endsWith('>')) {\n    type = type.slice(6, -1);\n  }\n\n  return getMdnLinkForApi(type);\n}\n\nfunction or(...values: (string | undefined | null)[]) {\n  return values.filter(Boolean)[0] ?? '';\n}\n\nexport const ApiLink: TOC<ApiLinkSignature> = <template>\n  {{#if @link}}\n    <a class=\"api-link\" href={{@link}} target=\"_blank\" rel=\"noopener noreferrer\">\n      <TypeCodeBlock\n        class=\"me-1\"\n        @code={{or @displayType (getDisplayType @type)}}\n        @inline={{true}}\n      />\n    </a>\n  {{else}}\n    {{#let (getDocType @type) as |mdnLink|}}\n      {{#if mdnLink}}\n        <a class=\"api-link mdn\" href={{mdnLink}} target=\"_blank\" rel=\"noopener noreferrer\">\n          <TypeCodeBlock\n            class=\"me-1\"\n            @code={{or @displayType (getDisplayType @type)}}\n            @inline={{true}}\n          />\n        </a>\n      {{else}}\n        <TypeCodeBlock\n          class=\"me-1\"\n          @code={{or @displayType (getDisplayType @type)}}\n          @inline={{true}}\n        />\n      {{/if}}\n    {{/let}}\n  {{/if}}\n</template>;\n\nexport default ApiLink;\n"],"names":["WRAPPER_OBJECT_TYPES","getDisplayType","type","includes","toLowerCase","getDocType","endsWith","slice","startsWith","getMdnLinkForApi","or","values","filter","Boolean","ApiLink","setComponentTemplate","precompileTemplate","strictMode","scope","TypeCodeBlock","templateOnly"],"mappings":";;;;;;AAcA;;;;;;AAMmE;AACnE,MAAMA,oBAAA,GAAuB,CAAC,QAAA,EAAU,QAAA,EAAU,SAAA,EAAW,QAAA,EAAU,QAAA,EAAU,QAAA,CAAS;AAE1F,SAASC,cAAAA,CAAeC,IAAY,EAAA;AAClC,EAAA,IAAIF,oBAAA,CAAqBG,QAAQ,CAACD,IAAA,CAAA,EAAO;AACvC,IAAA,OAAOA,KAAKE,WAAW,EAAA;AACzB,EAAA;AAEA,EAAA,OAAOF,IAAA;AACT;AAEA,SAASG,UAAAA,CAAWH,IAAY,EAAA;AAC9B,EAAA,IAAIA,IAAA,CAAKI,QAAQ,CAAC,IAAA,CAAA,EAAO;IACvBJ,IAAA,GAAOA,IAAA,CAAKK,KAAK,CAAC,CAAA,EAAG,EAAC,CAAA;EACxB,CAAA,MAAO,IAAIL,IAAA,CAAKI,QAAQ,CAAC,KAAA,CAAA,EAAQ;IAC/BJ,IAAA,GAAOA,IAAA,CAAKK,KAAK,CAAC,CAAA,EAAG,EAAC,CAAA;AACxB,EAAA,CAAA,MAAO,IAAIL,KAAKM,UAAU,CAAC,aAAaN,IAAA,CAAKI,QAAQ,CAAC,GAAA,CAAA,EAAM;IAC1DJ,IAAA,GAAOA,IAAA,CAAKK,KAAK,CAAC,CAAA,EAAG,EAAC,CAAA;AACxB,EAAA;EAEA,OAAOE,gBAAA,CAAiBP,IAAA,CAAA;AAC1B;AAEA,SAASQ,EAAAA,CAAG,GAAGC,MAAqC,EAAA;EAClD,OAAOA,OAAOC,MAAM,CAACC,OAAA,CAAQ,CAAC,EAAE,IAAI,EAAA;AACtC;MAEaC,OAAa,GAAAC,oBAAA,CAAoBC,kBAAA,CAAA,opBAAA,EA4B9C;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,aAAA;IAAAT,EAAA;IAAAT,cAAA;AAAAI,IAAAA;AAAA,GAAA;AAAU,CAAA,CAAA,EAAAe,YAAA,EAAA;;;;"}