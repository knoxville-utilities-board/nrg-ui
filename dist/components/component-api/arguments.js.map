{"version":3,"file":"arguments.js","sources":["../../../src/components/component-api/arguments.gts"],"sourcesContent":["import { assert } from '@ember/debug';\nimport { array, hash } from '@ember/helper';\nimport { get, set } from '@ember/object';\nimport Component from '@glimmer/component';\nimport Checkbox from '@nrg-ui/core/components/form/checkbox';\nimport Datetime from '@nrg-ui/core/components/form/datetime';\nimport NumberInput from '@nrg-ui/core/components/form/number-input';\nimport Select from '@nrg-ui/core/components/form/select';\nimport TextArea from '@nrg-ui/core/components/form/text-area';\nimport TextInput from '@nrg-ui/core/components/form/text-input';\nimport { bind } from '@nrg-ui/core/helpers/bind';\n\nimport { createLink, stringify } from '../../utils.ts';\nimport { TypeCodeBlock } from '../code-block.gts';\nimport ApiLink from './api-link.gts';\n\nimport type { TOC } from '@ember/component/template-only';\nimport type { ComponentLike, WithBoundArgs } from '@glint/template';\n\nfunction or(...args: (string | unknown)[]): string {\n  return args.find(Boolean) as string;\n}\n\nexport interface ArgumentSignature<T> {\n  Element: HTMLTableRowElement;\n  Args: {\n    alias?: string;\n    defaultValue?: T | string;\n    description?: string;\n    displayType?: string;\n    hideControl?: boolean;\n    model: object;\n    name?: string;\n    options?: readonly T[];\n    required?: boolean;\n    type?: string;\n    typeLink?: string;\n    value?: T;\n\n    onInput?: (value: T) => void;\n  };\n  Blocks: {\n    default: [BaseArgument<T>, T];\n  };\n}\n\nexport interface BaseArgumentSignature<T> {\n  Element: HTMLTableRowElement;\n  Args: {\n    displayType?: string;\n    type: string;\n    typeLink?: string;\n\n    onInput?: (value: T) => void;\n  } & ArgumentSignature<T>['Args'];\n  Blocks: {\n    default: [BaseArgument<T>, T];\n  };\n}\n\nexport class BaseArgument<T> extends Component<BaseArgumentSignature<T>> {\n  // This is needed for the binding types, which\n  // should be improved (if not simplified)\n  [key: string]: unknown;\n\n  get hasDefaultValue(): boolean {\n    return this.args.defaultValue !== undefined;\n  }\n\n  get value(): T {\n    const { alias, model, name, value } = this.args;\n\n    if (value !== undefined) {\n      return value;\n    }\n\n    assert('Model is required for BaseArgument when not providing @value', model);\n    assert('Name is required for BaseArgument when not providing @value', name);\n\n    return get(model, alias ?? name) as T;\n  }\n\n  set value(value: T) {\n    const { alias, model, name } = this.args;\n\n    assert('Model is required for BaseArgument when not providing @onInput', model);\n    assert('Name is required for BaseArgument when not providing @onInput', name);\n\n    set(model, alias ?? name, value);\n\n    this.args.onInput?.(value);\n  }\n\n  <template>\n    <tr class=\"argument\" ...attributes>\n      <td class=\"name\">\n        {{@name}}\n        {{#if @required}}\n          <span class=\"text-danger\">*</span>\n        {{/if}}\n      </td>\n      <td class=\"type\">\n        <ApiLink @displayType={{@displayType}} @link={{@typeLink}} @type={{@type}} />\n      </td>\n      <td class=\"description\">\n        {{@description}}\n      </td>\n      <td class=\"default\">\n        {{#if this.hasDefaultValue}}\n          <TypeCodeBlock @code={{stringify @defaultValue}} @inline={{true}} />\n        {{/if}}\n      </td>\n      <td class=\"value\">\n        {{#if @options}}\n          <Select @binding={{bind this \"value\"}} @options={{@options}} />\n        {{else}}\n          {{yield this this.value}}\n        {{/if}}\n      </td>\n    </tr>\n  </template>\n}\n\nexport const BooleanArgument: TOC<ArgumentSignature<boolean>> = <template>\n  <BaseArgument\n    @alias={{@alias}}\n    @defaultValue={{@defaultValue}}\n    @description={{@description}}\n    @displayType={{@displayType}}\n    @model={{@model}}\n    @name={{@name}}\n    @options={{@options}}\n    @type={{or @type \"Boolean\"}}\n    @typeLink={{@typeLink}}\n    @value={{@value}}\n    @onInput={{@onInput}}\n    ...attributes\n    as |base|\n  >\n    {{#unless @hideControl}}\n      <Checkbox @binding={{bind base \"value\"}} @label={{if base.value \"True\" \"False\"}} />\n    {{/unless}}\n\n    {{yield base base.value}}\n  </BaseArgument>\n</template>;\n\nexport const DateArgument: TOC<ArgumentSignature<Date>> = <template>\n  <BaseArgument\n    @alias={{@alias}}\n    @defaultValue={{@defaultValue}}\n    @description={{@description}}\n    @displayType={{@displayType}}\n    @model={{@model}}\n    @name={{@name}}\n    @options={{@options}}\n    @type={{or @type \"Date\"}}\n    @typeLink={{@typeLink}}\n    @value={{@value}}\n    @onInput={{@onInput}}\n    ...attributes\n    as |base|\n  >\n    {{#unless @hideControl}}\n      <Datetime @binding={{bind base \"value\"}} />\n    {{/unless}}\n\n    {{yield base base.value}}\n  </BaseArgument>\n</template>;\n\nexport const NumberArgument: TOC<ArgumentSignature<number>> = <template>\n  <BaseArgument\n    @alias={{@alias}}\n    @defaultValue={{@defaultValue}}\n    @description={{@description}}\n    @displayType={{@displayType}}\n    @model={{@model}}\n    @name={{@name}}\n    @type={{or @type \"Number\"}}\n    @typeLink={{@typeLink}}\n    @value={{@value}}\n    @onInput={{@onInput}}\n    as |base|\n  >\n    {{#unless @hideControl}}\n      <NumberInput @binding={{bind base \"value\"}} />\n    {{/unless}}\n\n    {{yield base base.value}}\n  </BaseArgument>\n</template>;\n\nexport const StringArgument: TOC<ArgumentSignature<string>> = <template>\n  <BaseArgument\n    @alias={{@alias}}\n    @defaultValue={{@defaultValue}}\n    @description={{@description}}\n    @displayType={{@displayType}}\n    @model={{@model}}\n    @name={{@name}}\n    @options={{@options}}\n    @type={{or @type \"String\"}}\n    @typeLink={{@typeLink}}\n    @value={{@value}}\n    @onInput={{@onInput}}\n    as |base|\n  >\n    {{#unless @hideControl}}\n      <TextInput @binding={{bind base \"value\"}} />\n    {{/unless}}\n\n    {{yield base base.value}}\n  </BaseArgument>\n</template>;\n\nexport const TextAreaArgument: TOC<ArgumentSignature<string>> = <template>\n  <BaseArgument\n    @alias={{@alias}}\n    @defaultValue={{@defaultValue}}\n    @description={{@description}}\n    @displayType={{@displayType}}\n    @model={{@model}}\n    @name={{@name}}\n    @options={{@options}}\n    @type={{or @type \"String\"}}\n    @typeLink={{@typeLink}}\n    @value={{@value}}\n    @onInput={{@onInput}}\n    as |base|\n  >\n    {{#unless @hideControl}}\n      <TextArea @binding={{bind base \"value\"}} />\n    {{/unless}}\n\n    {{yield base base.value}}\n  </BaseArgument>\n</template>;\n\nexport interface ArgumentsSignature {\n  Element: HTMLTableElement;\n  Args: {\n    sectionName: string;\n    subsectionName: string;\n    model: object;\n  };\n  Blocks: {\n    default: [\n      {\n        Base: WithBoundArgs<ComponentLike<BaseArgumentSignature<unknown>>, 'model'>;\n        Boolean: WithBoundArgs<ComponentLike<ArgumentSignature<boolean>>, 'model'>;\n        Date: WithBoundArgs<ComponentLike<ArgumentSignature<Date>>, 'model'>;\n        Number: WithBoundArgs<ComponentLike<ArgumentSignature<number>>, 'model'>;\n        String: WithBoundArgs<ComponentLike<ArgumentSignature<string>>, 'model'>;\n        TextArea: WithBoundArgs<ComponentLike<ArgumentSignature<string>>, 'model'>;\n      },\n    ];\n  };\n}\n\nexport default class Arguments extends Component<ArgumentsSignature> {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  TypedBase = BaseArgument<any>;\n\n  <template>\n    {{#let (createLink (array @sectionName @subsectionName \"args\")) as |link|}}\n      <h5 class=\"mt-4\" id={{link}}>\n        <a class=\"showcase-header\" href=\"#{{link}}\">\n          Arguments\n        </a>\n      </h5>\n    {{/let}}\n    <div class=\"arguments\">\n      <table class=\"table table-striped\" ...attributes>\n        <thead>\n          <tr>\n            <th class=\"name\">Name</th>\n            <th class=\"description\" colspan=\"2\">Description</th>\n            <th class=\"default\">Default</th>\n            <th class=\"value\">Value</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{yield\n            (hash\n              Base=(component this.TypedBase model=@model)\n              Boolean=(component BooleanArgument model=@model)\n              Date=(component DateArgument model=@model)\n              Number=(component NumberArgument model=@model)\n              String=(component StringArgument model=@model)\n              TextArea=(component TextAreaArgument model=@model)\n            )\n          }}\n        </tbody>\n      </table>\n    </div>\n  </template>\n}\n"],"names":["or","args","find","Boolean","BaseArgument","Component","hasDefaultValue","defaultValue","undefined","value","alias","model","name","assert","get","set","onInput","setComponentTemplate","precompileTemplate","strictMode","scope","ApiLink","TypeCodeBlock","stringify","Select","bind","BooleanArgument","Checkbox","templateOnly","DateArgument","Datetime","NumberArgument","NumberInput","StringArgument","TextInput","TextAreaArgument","TextArea","Arguments","TypedBase","createLink","array","hash"],"mappings":"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"}