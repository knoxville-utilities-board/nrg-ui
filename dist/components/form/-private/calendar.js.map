{"version":3,"file":"calendar.js","sources":["../../../../src/components/form/-private/calendar.gts"],"sourcesContent":["import { concat, fn } from '@ember/helper';\nimport { on } from '@ember/modifier';\nimport { action } from '@ember/object';\nimport Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport dayjs from 'dayjs';\nimport { t } from 'ember-intl';\n// @ts-expect-error Ember keyboard doesn't currently ship a type for the `on-key` modifier\n// https://github.com/adopted-ember-addons/ember-keyboard/issues/464\nimport onKey from 'ember-keyboard/modifiers/on-key';\nimport { notEq } from 'ember-truth-helpers';\n\nimport type Owner from '@ember/owner';\nimport type { Dayjs, OpUnitType } from 'dayjs';\n\nconst DAY_HEADERS = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];\nconst MINUTE_INTERVAL = 5;\n\ntype TransformData = Partial<{\n  [index in OpUnitType]: number;\n}>;\n\ntype Cell = {\n  display: string | number;\n  disabled: boolean;\n  selected: boolean;\n  customClass?: string;\n} & TransformData;\n\nexport interface DatetimeCalendarSignature {\n  Element: HTMLDivElement;\n  Args: {\n    allowMinuteSelection?: boolean;\n    maxDate?: Date | Dayjs;\n    minDate?: Date | Dayjs;\n    showNowShortcut?: boolean;\n    type?: 'datetime' | 'date' | 'time';\n    value?: Date | Dayjs | null;\n\n    isDateDisabled?: (date: Date, precision?: OpUnitType) => boolean;\n\n    onClose?: () => void;\n    onSelect?: (date: Date) => void;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nexport default class DatetimeCalendar extends Component<DatetimeCalendarSignature> {\n  @tracked\n  isSelectingDays = false;\n\n  @tracked\n  isSelectingMonths = false;\n\n  @tracked\n  isSelectingYears = false;\n\n  @tracked\n  isSelectingHours = false;\n\n  @tracked\n  isSelectingMinutes = false;\n\n  constructor(owner: Owner, args: DatetimeCalendarSignature['Args']) {\n    super(owner, args);\n    if (args.type === 'datetime' || args.type === 'date') {\n      this.isSelectingDays = true;\n    } else if (args.type === 'time') {\n      this.isSelectingHours = true;\n    }\n  }\n\n  get currentValue(): Dayjs {\n    if (this.args.value) {\n      return dayjs(this.args.value);\n    }\n\n    const { minDate, maxDate } = this.args;\n    const min = dayjs(minDate),\n      max = dayjs(maxDate);\n    const now = dayjs();\n\n    if (now.isBefore(min)) {\n      return min;\n    } else if (now.isAfter(max)) {\n      return max;\n    }\n\n    return now;\n  }\n\n  get hasValue() {\n    return Boolean(this.args.value);\n  }\n\n  get selectedDayIndex() {\n    const value = this.currentValue;\n    return value.date();\n  }\n\n  get selectedMonthIndex() {\n    const value = this.currentValue;\n    return value.month();\n  }\n\n  get selectedYearIndex() {\n    const value = this.currentValue;\n    return value.year();\n  }\n\n  get selectedHourIndex() {\n    const value = this.currentValue;\n    const hasTime = this.args.type === 'datetime' || this.args.type === 'time';\n    if (!hasTime) {\n      return;\n    }\n    return value.hour();\n  }\n\n  get selectedMinuteIndex() {\n    const value = this.currentValue;\n    const hasTime = this.args.type === 'datetime' || this.args.type === 'time';\n    if (!hasTime) {\n      return;\n    }\n    return value.minute();\n  }\n\n  get showNowShortcut() {\n    if (this.args.showNowShortcut === false) {\n      return false;\n    }\n    const now = dayjs();\n    const userDisabled = this.args.isDateDisabled?.(now.toDate());\n    const afterMaxDate = now.isAfter(this.args.maxDate, 'date');\n    const beforeMinDate = now.isBefore(this.args.minDate, 'date');\n    return !userDisabled && !afterMaxDate && !beforeMinDate;\n  }\n\n  get headerDisplay() {\n    const calendar = dayjs({\n      day: this.selectedDayIndex,\n      month: this.selectedMonthIndex,\n      year: this.selectedYearIndex,\n    });\n    if (this.isSelectingYears) {\n      const firstYear = this.years[0]?.[0]?.year;\n      const lastYear = this.years[4]?.[1]?.year;\n      return `${firstYear} - ${lastYear}`;\n    }\n    let format = 'MMMM YYYY';\n    if (this.isSelectingMonths) {\n      format = 'YYYY';\n    } else if (this.isSelectingHours || this.isSelectingMinutes) {\n      format = 'LL';\n    }\n    return calendar.format(format);\n  }\n\n  get minutes(): Cell[][] {\n    let calendar = dayjs({\n      hour: this.selectedHourIndex,\n      day: this.selectedDayIndex,\n      month: this.selectedMonthIndex,\n      year: this.selectedYearIndex,\n    });\n    const rows = [];\n    for (let i = 0; i < 4; i++) {\n      const row = [];\n      for (let j = 0; j < 3; j++) {\n        const minute = calendar.minute();\n        const disabled = this.isDateDisabled(calendar.toDate(), 'minute');\n        const selected = !disabled && this.hasValue && this.selectedMinuteIndex === minute;\n        row.push({\n          display: calendar.format('LT'),\n          minute,\n          disabled,\n          selected,\n        });\n        calendar = calendar.add(MINUTE_INTERVAL, 'minute');\n      }\n      rows.push(row);\n    }\n    return rows;\n  }\n\n  get hours(): Cell[][] {\n    let calendar = dayjs({\n      day: this.selectedDayIndex,\n      month: this.selectedMonthIndex,\n      year: this.selectedYearIndex,\n    });\n    const rows = [];\n    for (let i = 0; i < 6; i++) {\n      const row = [];\n      for (let j = 0; j < 4; j++) {\n        const hour = calendar.hour();\n        const disabled = this.isDateDisabled(calendar.toDate(), 'hour');\n        const selected = !disabled && this.hasValue && this.selectedHourIndex === hour;\n        row.push({\n          display: calendar.format('LT'),\n          hour,\n          disabled,\n          selected,\n        });\n        calendar = calendar.add(1, 'hour');\n      }\n      rows.push(row);\n    }\n    return rows;\n  }\n\n  get days(): Cell[][] {\n    const today = dayjs();\n    const weeks = [];\n    let calendar = dayjs({\n      month: this.selectedMonthIndex,\n      year: this.selectedYearIndex,\n    }).startOf('week');\n    for (let i = 0; i < 6; i++) {\n      const week = [];\n      do {\n        const date = calendar.date();\n        const month = calendar.month();\n        const year = calendar.year();\n        const isDifferentMonth = month !== this.selectedMonthIndex;\n        const dateIsToday = calendar.isSame(today, 'date');\n        const disabled = this.isDateDisabled(calendar.toDate(), 'date') || isDifferentMonth;\n        const selected = !disabled && this.hasValue && this.selectedDayIndex === date;\n\n        week.push({\n          customClass: (dateIsToday && 'today') || '',\n          display: date,\n          date,\n          month,\n          year,\n          disabled,\n          selected,\n        });\n        calendar = calendar.add(1, 'day');\n      } while (calendar.day() != 0);\n\n      weeks.push(week);\n    }\n    return weeks;\n  }\n\n  get months(): Cell[][] {\n    const rows = [];\n    let calendar = dayjs({\n      year: this.selectedYearIndex,\n    });\n    for (let i = 0; i < 4; i++) {\n      const row = [];\n      for (let j = 0; j < 3; j++) {\n        const month = calendar.month();\n        const disabled = this.isDateDisabled(calendar.toDate(), 'month');\n        const selected = !disabled && this.hasValue && this.selectedMonthIndex === month;\n        row.push({\n          display: calendar.format('MMM'),\n          month,\n          disabled,\n          selected,\n        });\n        calendar = calendar.add(1, 'month');\n      }\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  get years(): Cell[][] {\n    const rows = [];\n    const remainder = this.selectedYearIndex % 10;\n    const beginYear = this.selectedYearIndex - remainder;\n\n    let year = beginYear;\n\n    for (let i = 0; i < 5; i++) {\n      const row = [];\n      for (let j = 0; j < 2; j++, year++) {\n        const calendar = dayjs({\n          year,\n        });\n        const disabled = this.isDateDisabled(calendar.toDate(), 'year');\n        const selected = !disabled && this.hasValue && this.selectedYearIndex === year;\n        row.push({\n          display: year,\n          year,\n          disabled,\n          selected,\n        });\n      }\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  get table() {\n    let columnHeaders: string[] | null = DAY_HEADERS;\n    let columnCountClass = 'seven';\n    let rows: Cell[][] = this.days;\n    if (this.isSelectingMonths) {\n      columnHeaders = null;\n      columnCountClass = 'three';\n      rows = this.months;\n    } else if (this.isSelectingYears) {\n      columnHeaders = null;\n      columnCountClass = 'two';\n      rows = this.years;\n    } else if (this.isSelectingHours) {\n      columnHeaders = null;\n      columnCountClass = 'four';\n      rows = this.hours;\n    } else if (this.isSelectingMinutes) {\n      columnHeaders = null;\n      columnCountClass = 'three';\n      rows = this.minutes;\n    }\n    return {\n      columnCountClass,\n      columnHeaders,\n      rows,\n    };\n  }\n\n  get allowMinuteSelection() {\n    return this.args.allowMinuteSelection !== false;\n  }\n\n  isBeyondDateRange(date: Date | Dayjs, precision: OpUnitType) {\n    date = dayjs(date);\n    let valid = true;\n    if (this.args.minDate) {\n      valid = !date.isBefore(this.args.minDate, precision);\n    }\n    if (this.args.maxDate) {\n      valid = valid && !date.isAfter(this.args.maxDate, precision);\n    }\n    return !valid;\n  }\n\n  isDateDisabled(date: Date, precision: OpUnitType) {\n    const userDisabled = this.args.isDateDisabled?.(date, precision);\n    const isBeyondDateRange = this.isBeyondDateRange(date, precision);\n    return userDisabled || isBeyondDateRange;\n  }\n\n  manipulateDate(operation: 'add' | 'subtract' | 'set', dateTransformation: TransformData) {\n    let date = dayjs({\n      day: this.selectedDayIndex,\n      month: this.selectedMonthIndex,\n      year: this.selectedYearIndex,\n      hour: this.selectedHourIndex ?? 0,\n      minute: this.selectedMinuteIndex ?? 0,\n    });\n    const currentDate = date.clone();\n\n    date = date[operation](dateTransformation);\n\n    let precision: OpUnitType | undefined = undefined;\n\n    if (this.isSelectingDays) {\n      precision = 'day';\n    } else if (this.isSelectingMonths) {\n      precision = 'month';\n    } else if (this.isSelectingYears) {\n      precision = 'year';\n    } else if (this.isSelectingHours) {\n      precision = 'hour';\n    } else if (this.isSelectingMinutes) {\n      precision = 'minute';\n    }\n\n    const userDisabled = this.args.isDateDisabled?.(date.toDate(), precision);\n    if (userDisabled) {\n      this.onSelect(currentDate.toDate());\n      return;\n    }\n\n    const dateBeforeMinDate = this.args.minDate && date.isBefore(this.args.minDate);\n    const dateAfterMaxDate = this.args.maxDate && date.isAfter(this.args.maxDate);\n\n    if (dateBeforeMinDate) {\n      date = dayjs(this.args.minDate).clone();\n      const remainder = date.minute() % MINUTE_INTERVAL;\n      date = date.add(remainder, 'minute');\n    } else if (dateAfterMaxDate) {\n      date = dayjs(this.args.maxDate).clone();\n      const remainder = date.minute() % MINUTE_INTERVAL;\n      date = date.subtract(remainder, 'minute');\n    }\n\n    this.onSelect(date.toDate());\n  }\n\n  selectDate() {\n    const value = dayjs({\n      year: this.selectedYearIndex,\n      month: this.selectedMonthIndex,\n      day: this.selectedDayIndex,\n      hour: this.selectedHourIndex ?? 0,\n      minute: this.selectedMinuteIndex ?? 0,\n    });\n    this.onSelect(value.toDate());\n  }\n\n  onSelect(date: Date) {\n    this.args.onSelect?.(date);\n  }\n\n  close() {\n    this.args.onClose?.();\n  }\n\n  @action\n  moveLeft(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    if (this.isSelectingDays) {\n      this.manipulateDate('subtract', { day: 1 });\n    } else if (this.isSelectingMonths) {\n      this.manipulateDate('subtract', { month: 1 });\n    } else if (this.isSelectingYears) {\n      this.manipulateDate('subtract', { year: 1 });\n    } else if (this.isSelectingMinutes) {\n      this.manipulateDate('subtract', { minute: MINUTE_INTERVAL });\n    } else if (this.isSelectingHours) {\n      this.manipulateDate('subtract', { hour: 1 });\n    }\n  }\n\n  @action\n  moveRight(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    if (this.isSelectingDays) {\n      this.manipulateDate('add', { day: 1 });\n    } else if (this.isSelectingMonths) {\n      this.manipulateDate('add', { month: 1 });\n    } else if (this.isSelectingYears) {\n      this.manipulateDate('add', { year: 1 });\n    } else if (this.isSelectingMinutes) {\n      this.manipulateDate('add', { minute: MINUTE_INTERVAL });\n    } else if (this.isSelectingHours) {\n      this.manipulateDate('add', { hour: 1 });\n    }\n  }\n\n  @action\n  moveUp(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    if (this.isSelectingDays) {\n      this.manipulateDate('subtract', { week: 1 });\n    } else if (this.isSelectingMonths) {\n      this.manipulateDate('subtract', { month: 3 });\n    } else if (this.isSelectingYears) {\n      this.manipulateDate('subtract', { year: 2 });\n    } else if (this.isSelectingMinutes) {\n      this.manipulateDate('subtract', { minute: MINUTE_INTERVAL * 3 });\n    } else if (this.isSelectingHours) {\n      this.manipulateDate('subtract', { hour: 4 });\n    }\n  }\n\n  @action\n  moveDown(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    if (this.isSelectingDays) {\n      this.manipulateDate('add', { week: 1 });\n    } else if (this.isSelectingMonths) {\n      this.manipulateDate('add', { month: 3 });\n    } else if (this.isSelectingYears) {\n      this.manipulateDate('add', { year: 2 });\n    } else if (this.isSelectingMinutes) {\n      this.manipulateDate('add', { minute: MINUTE_INTERVAL * 3 });\n    } else if (this.isSelectingHours) {\n      this.manipulateDate('add', { hour: 4 });\n    }\n  }\n\n  @action\n  onEnter(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    this.goToNextWorkFlowStep();\n  }\n\n  @action\n  onEscape(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    this.close();\n  }\n\n  @action\n  setToNow() {\n    const now = new Date();\n    if (!this.allowMinuteSelection) {\n      now.setMinutes(0, 0, 0);\n    }\n    this.onSelect(now);\n  }\n\n  @action\n  clickCell(cell: TransformData, evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n\n    if (this.isSelectingMinutes) {\n      this.manipulateDate('set', { minute: cell.minute });\n    } else if (this.isSelectingHours) {\n      this.manipulateDate('set', {\n        hour: cell.hour,\n        minute: 0,\n      });\n    } else if (this.isSelectingMonths) {\n      this.manipulateDate('set', { month: cell.month });\n    } else if (this.isSelectingYears) {\n      this.manipulateDate('set', { year: cell.year });\n    } else if (this.isSelectingDays) {\n      this.manipulateDate('set', {\n        year: cell.year,\n        month: cell.month,\n        date: cell.date,\n      });\n    }\n    this.goToNextWorkFlowStep();\n  }\n\n  @action\n  onHeaderDisplayClick() {\n    if (this.isSelectingDays) {\n      this.isSelectingDays = false;\n      this.isSelectingMonths = true;\n    } else if (this.isSelectingMonths) {\n      this.isSelectingMonths = false;\n      this.isSelectingYears = true;\n    } else if (this.isSelectingYears) {\n      this.isSelectingYears = false;\n      this.isSelectingDays = true;\n    }\n  }\n\n  @action\n  goToNextWorkFlowStep() {\n    if (this.args.type === 'datetime' || this.args.type === 'date') {\n      if (this.isSelectingMonths) {\n        this.isSelectingMonths = false;\n        this.isSelectingDays = true;\n        return;\n      } else if (this.isSelectingYears) {\n        this.isSelectingYears = false;\n        this.isSelectingMonths = true;\n        return;\n      }\n    }\n    if (this.args.type === 'datetime' || this.args.type === 'time') {\n      if (this.isSelectingHours) {\n        this.isSelectingHours = false;\n        if (this.allowMinuteSelection) {\n          this.isSelectingMinutes = true;\n        } else {\n          this.close();\n        }\n        return;\n      } else if (this.isSelectingMinutes) {\n        this.close();\n        return;\n      }\n    }\n    if (this.args.type === 'datetime' && this.isSelectingDays) {\n      this.isSelectingDays = false;\n      this.isSelectingHours = true;\n    } else if (this.args.type === 'date') {\n      this.close();\n    }\n  }\n\n  @action\n  onPrevious() {\n    if (this.isSelectingDays) {\n      this.manipulateDate('subtract', { month: 1 });\n    } else if (this.isSelectingMonths) {\n      this.manipulateDate('subtract', { year: 1 });\n    } else if (this.isSelectingYears) {\n      this.manipulateDate('subtract', { year: 10 });\n    } else if (this.isSelectingHours || this.isSelectingMinutes) {\n      this.manipulateDate('subtract', { day: 1 });\n    }\n  }\n\n  @action\n  onNext() {\n    if (this.isSelectingDays) {\n      this.manipulateDate('add', { month: 1 });\n    } else if (this.isSelectingMonths) {\n      this.manipulateDate('add', { year: 1 });\n    } else if (this.isSelectingYears) {\n      this.manipulateDate('add', { year: 10 });\n    } else if (this.isSelectingHours || this.isSelectingMinutes) {\n      this.manipulateDate('add', { day: 1 });\n    }\n  }\n\n  <template>\n    <div\n      tabindex=\"-1\"\n      class=\"position-absolute overflow-hidden rounded border mt-5\"\n      role=\"dialog\"\n      {{onKey \"ArrowUp\" this.moveUp}}\n      {{onKey \"ArrowDown\" this.moveDown}}\n      {{onKey \"ArrowLeft\" this.moveLeft}}\n      {{onKey \"ArrowRight\" this.moveRight}}\n      {{onKey \"Enter\" this.onEnter}}\n      {{onKey \"Escape\" this.onEscape}}\n      ...attributes\n    >\n      <table class=\"table table-borderless calendar mb-0\">\n        <thead>\n          {{#if (notEq @type \"time\")}}\n            <tr class=\"header\">\n              <th colspan=\"7\">\n                <span role=\"button\" {{on \"click\" this.onHeaderDisplayClick}}>\n                  {{this.headerDisplay}}\n                </span>\n                <span\n                  aria-label={{t \"nrg.base.previous\"}}\n                  class=\"float-start\"\n                  role=\"button\"\n                  {{on \"click\" this.onPrevious}}\n                >\n                  <i class=\"bi-chevron-left\" role=\"img\"></i>\n                </span>\n                <span\n                  aria-label={{t \"nrg.base.next\"}}\n                  class=\"float-end\"\n                  role=\"button\"\n                  {{on \"click\" this.onNext}}\n                >\n                  <i class=\"bi-chevron-right\"></i>\n                </span>\n              </th>\n            </tr>\n          {{/if}}\n          {{#if this.table.columnHeaders}}\n            <tr>\n              {{#each this.table.columnHeaders as |columnHeader|}}\n                <th>{{columnHeader}}</th>\n              {{/each}}\n            </tr>\n          {{/if}}\n        </thead>\n        <tbody>\n          {{#each this.table.rows as |row|}}\n            <tr>\n              {{#each row as |cell|}}\n                <td\n                  class=\"cell\n                    {{if cell.disabled 'disabled'}}\n                    {{if cell.selected 'active focus'}}\n                    {{cell.customClass}}\"\n                  role=\"button\"\n                  {{on \"click\" (fn this.clickCell cell)}}\n                >\n                  {{cell.display}}\n                </td>\n              {{/each}}\n            </tr>\n          {{/each}}\n        </tbody>\n        <tfoot>\n          {{#if this.showNowShortcut}}\n            <tr>\n              <td colspan=\"7\" class=\"today cell\" role=\"button\" {{on \"click\" this.setToNow}}>\n                {{t (concat \"nrg.base.datetime.\" @type)}}\n              </td>\n            </tr>\n          {{/if}}\n        </tfoot>\n      </table>\n    </div>\n  </template>\n}\n"],"names":["DAY_HEADERS","MINUTE_INTERVAL","DatetimeCalendar","Component","g","prototype","tracked","i","constructor","owner","args","type","isSelectingDays","isSelectingHours","currentValue","value","dayjs","minDate","maxDate","min","max","now","isBefore","isAfter","hasValue","Boolean","selectedDayIndex","date","selectedMonthIndex","month","selectedYearIndex","year","selectedHourIndex","hasTime","hour","selectedMinuteIndex","minute","showNowShortcut","userDisabled","isDateDisabled","toDate","afterMaxDate","beforeMinDate","headerDisplay","calendar","day","isSelectingYears","firstYear","years","lastYear","format","isSelectingMonths","isSelectingMinutes","minutes","rows","row","j","disabled","selected","push","display","add","hours","days","today","weeks","startOf","week","isDifferentMonth","dateIsToday","isSame","customClass","months","remainder","beginYear","table","columnHeaders","columnCountClass","allowMinuteSelection","isBeyondDateRange","precision","valid","manipulateDate","operation","dateTransformation","currentDate","clone","undefined","onSelect","dateBeforeMinDate","dateAfterMaxDate","subtract","selectDate","close","onClose","moveLeft","evt","preventDefault","stopPropagation","n","action","moveRight","moveUp","moveDown","onEnter","goToNextWorkFlowStep","onEscape","setToNow","Date","setMinutes","clickCell","cell","onHeaderDisplayClick","onPrevious","onNext","setComponentTemplate","precompileTemplate","strictMode","scope","onKey","notEq","on","t","fn","concat"],"mappings":"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"}