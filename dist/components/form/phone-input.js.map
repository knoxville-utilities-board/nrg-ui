{"version":3,"file":"phone-input.js","sources":["../../../src/components/form/phone-input.gts"],"sourcesContent":["import { assert } from '@ember/debug';\nimport { fn } from '@ember/helper';\nimport { on } from '@ember/modifier';\nimport { action } from '@ember/object';\nimport { tracked } from '@glimmer/tracking';\n\nimport InputField from './-private/input-field.ts';\nimport { format as defaultFormat } from '../../utils/phone.ts';\n\nimport type { Optional } from '../../index.ts';\n\nexport interface PhoneInputArgs {\n  format?: ((value: Optional<string>) => string) | false;\n}\n\nexport default class PhoneField extends InputField<PhoneInputArgs> {\n  @tracked\n  isFocused = false;\n\n  get format() {\n    return this.args.format ?? defaultFormat;\n  }\n\n  get displayValue() {\n    const { format, isFocused } = this;\n\n    if (isFocused || !this.format || !this.value) {\n      return this.value;\n    }\n\n    assert('format must be a function or false', typeof format === 'function');\n\n    return format(this.value);\n  }\n\n  @action\n  change(event: Event): void {\n    const target = event.target as HTMLInputElement;\n    const newValue = target.value ?? '';\n\n    this.onChange(newValue.replace(/\\D/g, ''));\n  }\n\n  @action\n  toggleFocus(focused: boolean): void {\n    this.isFocused = focused;\n  }\n\n  <template>\n    <input\n      aria-describedby={{@fieldOptions.describedBy}}\n      class={{this.classList}}\n      disabled={{@fieldOptions.disabled}}\n      id={{@fieldOptions.id}}\n      readonly={{@readonly}}\n      type=\"tel\"\n      value={{this.displayValue}}\n      {{on \"input\" this.change}}\n      {{on \"focus\" (fn this.toggleFocus true)}}\n      {{on \"blur\" (fn this.toggleFocus false)}}\n      ...attributes\n    />\n  </template>\n}\n"],"names":["PhoneField","InputField","g","prototype","tracked","i","format","args","defaultFormat","displayValue","isFocused","value","assert","change","event","target","newValue","onChange","replace","n","action","toggleFocus","focused","setComponentTemplate","precompileTemplate","strictMode","scope","on","fn"],"mappings":";;;;;;;;;;;AAee,MAAMA,mBAAmBC,UAAA,CAAW;AAAA,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,WAAA,EAAA,CAChDC,OAAA,CAAA,EAAA,YAAA;AAAA,MAAA,OACW,KAAA;AAAA,IAAA,CAAA,CAAA;AAAA;EAAA,UAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,WAAA,CAAA,EAAA,MAAA;EAEZ,IAAIC,MAAAA,GAAS;AACX,IAAA,OAAO,IAAI,CAACC,IAAI,CAACD,MAAM,IAAIE,MAAA;AAC7B,EAAA;EAEA,IAAIC,YAAAA,GAAe;IACjB,MAAM;MAAEH,MAAM;AAAEI,MAAAA;AAAS,KAAE,GAAG,IAAI;IAElC,IAAIA,SAAA,IAAa,CAAC,IAAI,CAACJ,MAAM,IAAI,CAAC,IAAI,CAACK,KAAK,EAAE;MAC5C,OAAO,IAAI,CAACA,KAAK;AACnB,IAAA;AAEAC,IAAAA,MAAA,CAAO,oCAAA,EAAsC,OAAON,MAAA,KAAW,UAAA,CAAA;AAE/D,IAAA,OAAOA,MAAA,CAAO,IAAI,CAACK,KAAK,CAAA;AAC1B,EAAA;EAGAE,MAAAA,CAAOC,KAAY,EAAQ;AACzB,IAAA,MAAMC,MAAA,GAASD,KAAA,CAAMC,MAAU;AAC/B,IAAA,MAAMC,QAAA,GAAWD,MAAA,CAAOJ,KAAK,IAAI,EAAA;IAEjC,IAAI,CAACM,QAAQ,CAACD,QAAA,CAASE,OAAO,CAAC,KAAA,EAAO,EAAA,CAAA,CAAA;AACxC,EAAA;AAAA,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAhB,SAAA,EAAA,QAAA,EAAA,CANCiB,MAAA,CAAA,CAAA;AAAA;EASDC,WAAAA,CAAYC,OAAgB,EAAQ;IAClC,IAAI,CAACZ,SAAS,GAAGY,OAAA;AACnB,EAAA;AAAA,EAAA;IAAAH,CAAA,CAAA,IAAA,CAAAhB,SAAA,EAAA,aAAA,EAAA,CAHCiB,MAAA,CAAA,CAAA;AAAA;AAKD,EAAA;IAAAG,oBAAA,CAAAC,kBAAA,CAAA,kVAAA,EAcA;MAAAC,UAAA,EAAA,IAAA;AAAAC,MAAAA,KAAA,EAAAA,OAAA;QAAAC,EAAA;AAAAC,QAAAA;AAAA,OAAA;KAAU,CAAA,EAAV,IAAW,CAAA;AAAD;AACZ;;;;"}