{"version":3,"file":"checkbox.js","sources":["../../../src/components/form/checkbox.gts"],"sourcesContent":["import { registerDestructor } from '@ember/destroyable';\nimport { on } from '@ember/modifier';\nimport { action } from '@ember/object';\n\nimport BoundValue from './bound-value.ts';\n\nimport type { BoundValueSignature } from './bound-value';\nimport type { FieldOptions } from './field.gts';\nimport type { Optional } from '../../index.ts';\nimport type Owner from '@ember/owner';\n\nexport type CheckboxSignature = BoundValueSignature<\n  {\n    Element: HTMLInputElement;\n    Args: {\n      inline?: boolean;\n      label?: string;\n      reverse?: boolean;\n      type?: 'checkbox' | 'switch';\n\n      fieldOptions?: FieldOptions;\n\n      onDestroy?: (checkbox: Checkbox) => void;\n      onInit?: (checkbox: Checkbox) => void;\n    };\n    Blocks: {\n      default: [];\n    };\n  },\n  boolean\n>;\n\nexport default class Checkbox extends BoundValue<CheckboxSignature, boolean> {\n  internalId = crypto.randomUUID();\n\n  constructor(\n    owner: Owner,\n    args: BoundValueSignature<CheckboxSignature, Optional<boolean>>['Args'],\n  ) {\n    super(owner, args);\n\n    args.onInit?.(this);\n\n    registerDestructor(this, () => {\n      args.onDestroy?.(this);\n    });\n  }\n\n  get classList() {\n    const classes = ['form-check-input'];\n\n    if (this.args.fieldOptions?.isInvalid) {\n      classes.push('is-invalid');\n    } else if (this.args.fieldOptions?.isWarning) {\n      classes.push('is-warning');\n    }\n\n    return classes.join(' ');\n  }\n\n  get divClassList() {\n    const classList = ['form-check'];\n\n    if (this.isSwitch) {\n      classList.push('form-switch');\n    }\n\n    if (this.args.inline) {\n      classList.push('form-check-inline');\n    }\n\n    if (this.args.reverse) {\n      classList.push('form-check-reverse');\n    }\n\n    return classList.join(' ');\n  }\n\n  get isSwitch() {\n    return this.args.type === 'switch';\n  }\n\n  get id() {\n    return this.args.fieldOptions?.id ?? this.internalId;\n  }\n\n  @action\n  change(evt: Event) {\n    const target = evt.target as HTMLInputElement;\n    this.onChange(target.checked);\n  }\n\n  <template>\n    <div class={{this.divClassList}}>\n      <input\n        aria-describedby={{@fieldOptions.describedBy}}\n        checked={{this.value}}\n        class={{this.classList}}\n        disabled={{@fieldOptions.disabled}}\n        id={{this.id}}\n        role={{if this.isSwitch \"switch\" \"checkbox\"}}\n        type=\"checkbox\"\n        value={{this.value}}\n        {{on \"change\" this.change}}\n        ...attributes\n      />\n      <label class=\"form-check-label\" for={{this.id}}>\n        {{#if (has-block)}}\n          {{yield}}\n        {{else}}\n          {{@label}}\n        {{/if}}\n        {{#if @fieldOptions.required}}\n          <span class=\"text-danger\">*</span>\n        {{/if}}\n      </label>\n    </div>\n  </template>\n}\n"],"names":["Checkbox","BoundValue","internalId","crypto","randomUUID","constructor","owner","args","onInit","registerDestructor","onDestroy","classList","classes","fieldOptions","isInvalid","push","isWarning","join","divClassList","isSwitch","inline","reverse","type","id","change","evt","target","onChange","checked","n","prototype","action","setComponentTemplate","precompileTemplate","strictMode","scope","on"],"mappings":";;;;;;;;AAgCe,MAAMA,QAAA,SAAiBC,UAAA,CAAqC;AACzEC,EAAAA,UAAA,GAAaC,MAAA,CAAOC,UAAU,EAAA;AAE9BC,EAAAA,WAAAA,CACEC,KAAY,EACZC,IAAuE,EACvE;AACA,IAAA,KAAK,CAACD,KAAA,EAAOC,IAAA,CAAA;AAEbA,IAAAA,IAAA,CAAKC,MAAM,GAAG,IAAI,CAAA;IAElBC,kBAAA,CAAmB,IAAI,EAAE,MAAA;AACvBF,MAAAA,IAAA,CAAKG,SAAS,GAAG,IAAI,CAAA;AACvB,IAAA,CAAA,CAAA;AACF,EAAA;EAEA,IAAIC,SAAAA,GAAY;AACd,IAAA,MAAMC,OAAA,GAAU,CAAC,kBAAA,CAAmB;AAEpC,IAAA,IAAI,IAAI,CAACL,IAAI,CAACM,YAAY,EAAEC,SAAA,EAAW;AACrCF,MAAAA,OAAA,CAAQG,IAAI,CAAC,YAAA,CAAA;IACf,CAAA,MAAO,IAAI,IAAI,CAACR,IAAI,CAACM,YAAY,EAAEG,SAAA,EAAW;AAC5CJ,MAAAA,OAAA,CAAQG,IAAI,CAAC,YAAA,CAAA;AACf,IAAA;AAEA,IAAA,OAAOH,OAAA,CAAQK,IAAI,CAAC,GAAA,CAAA;AACtB,EAAA;EAEA,IAAIC,YAAAA,GAAe;AACjB,IAAA,MAAMP,SAAA,GAAY,CAAC,YAAA,CAAa;IAEhC,IAAI,IAAI,CAACQ,QAAQ,EAAE;AACjBR,MAAAA,SAAA,CAAUI,IAAI,CAAC,aAAA,CAAA;AACjB,IAAA;AAEA,IAAA,IAAI,IAAI,CAACR,IAAI,CAACa,MAAM,EAAE;AACpBT,MAAAA,SAAA,CAAUI,IAAI,CAAC,mBAAA,CAAA;AACjB,IAAA;AAEA,IAAA,IAAI,IAAI,CAACR,IAAI,CAACc,OAAO,EAAE;AACrBV,MAAAA,SAAA,CAAUI,IAAI,CAAC,oBAAA,CAAA;AACjB,IAAA;AAEA,IAAA,OAAOJ,SAAA,CAAUM,IAAI,CAAC,GAAA,CAAA;AACxB,EAAA;EAEA,IAAIE,QAAAA,GAAW;AACb,IAAA,OAAO,IAAI,CAACZ,IAAI,CAACe,IAAI,KAAK,QAAA;AAC5B,EAAA;EAEA,IAAIC,EAAAA,GAAK;IACP,OAAO,IAAI,CAAChB,IAAI,CAACM,YAAY,EAAEU,EAAA,IAAM,IAAI,CAACrB,UAAU;AACtD,EAAA;EAGAsB,MAAAA,CAAOC,GAAU,EAAE;AACjB,IAAA,MAAMC,MAAA,GAASD,GAAA,CAAIC,MAAU;AAC7B,IAAA,IAAI,CAACC,QAAQ,CAACD,MAAA,CAAOE,OAAO,CAAA;AAC9B,EAAA;AAAA,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,QAAA,EAAA,CAJCC,MAAA,CAAA,CAAA;AAAA;AAMD,EAAA;IAAAC,oBAAA,CAAAC,kBAAA,CAAA,qkBAAA,EAyBA;MAAAC,UAAA,EAAA,IAAA;AAAAC,MAAAA,KAAA,EAAAA,OAAA;AAAAC,QAAAA;AAAA,OAAA;KAAU,CAAA,EAAV,IAAW,CAAA;AAAD;AACZ;;;;"}