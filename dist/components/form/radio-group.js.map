{"version":3,"file":"radio-group.js","sources":["../../../src/components/form/radio-group.gts"],"sourcesContent":["import { hash } from '@ember/helper';\nimport { on } from '@ember/modifier';\nimport { action } from '@ember/object';\nimport Component from '@glimmer/component';\n\nimport BoundValue from './bound-value.ts';\n\nimport type { FieldOptions } from './field.gts';\nimport type { BoundValueSignature, Optional } from '../../index.ts';\nimport type { ComponentLike, WithBoundArgs } from '@glint/template';\n\nexport type RadioGroupSignature = BoundValueSignature<\n  {\n    Element: HTMLDivElement;\n    Args: {\n      basic?: boolean;\n      name?: string;\n\n      fieldOptions?: FieldOptions;\n    };\n    Blocks: {\n      default: [{ Radio: WithBoundArgs<ComponentLike<RadioSignature>, 'name'> }];\n    };\n  },\n  string\n>;\n\nexport default class RadioGroup extends BoundValue<RadioGroupSignature, string> {\n  get classList() {\n    const classes = ['form-control', 'form-check-group'];\n\n    if (this.args.basic) {\n      classes[0] += '-plaintext';\n    }\n\n    if (this.args.fieldOptions?.isInvalid) {\n      classes.push('is-invalid');\n    } else if (this.args.fieldOptions?.isWarning) {\n      classes.push('is-warning');\n    }\n\n    return classes.join(' ');\n  }\n\n  get name() {\n    return this.args.name ?? crypto.randomUUID();\n  }\n\n  @action\n  change(updatedValue: Optional<string>) {\n    if (updatedValue) {\n      this.value = updatedValue;\n      this.onChange(updatedValue);\n    }\n  }\n\n  <template>\n    <div\n      aria-describedby={{@fieldOptions.describedBy}}\n      class={{this.classList}}\n      id={{@fieldOptions.id}}\n      ...attributes\n    >\n      {{yield\n        (hash\n          Radio=(component\n            Radio\n            currentValue=this.value\n            disabled=@fieldOptions.disabled\n            isInvalid=@fieldOptions.isInvalid\n            isWarning=@fieldOptions.isWarning\n            name=this.name\n            onChange=this.change\n          )\n        )\n      }}\n    </div>\n  </template>\n}\n\nexport interface RadioSignature {\n  Element: HTMLInputElement;\n  Args: {\n    currentValue?: string | null;\n    disabled?: boolean;\n    isInvalid?: boolean;\n    isWarning?: boolean;\n    label?: string;\n    name: string;\n    option?: string;\n    onChange?: (value: string, ...args: unknown[]) => void;\n  };\n}\n\nclass Radio extends Component<RadioSignature> {\n  @action\n  change(evt: Event) {\n    const target = evt.target as HTMLInputElement;\n    this.args.onChange?.(target?.value);\n  }\n\n  get classList() {\n    const classes = ['form-check-input'];\n\n    if (this.args.isInvalid) {\n      classes.push('is-invalid');\n    } else if (this.args.isWarning) {\n      classes.push('is-warning');\n    }\n\n    return classes.join(' ');\n  }\n\n  get checked() {\n    if (this.args.option == null) {\n      return false;\n    }\n\n    return this.args.option === this.args.currentValue;\n  }\n\n  get id() {\n    return `${this.args.name}-${this.args.option}`;\n  }\n\n  get label() {\n    return this.args.label ?? this.args.option;\n  }\n\n  <template>\n    <div class=\"form-check\">\n      <input\n        checked={{this.checked}}\n        class={{this.classList}}\n        disabled={{@disabled}}\n        id={{this.id}}\n        name={{@name}}\n        type=\"radio\"\n        value={{@option}}\n        {{on \"change\" this.change}}\n        ...attributes\n      />\n      <label class=\"form-check-label\" for={{this.id}}>\n        {{this.label}}\n      </label>\n    </div>\n  </template>\n}\n"],"names":["RadioGroup","BoundValue","classList","classes","args","basic","fieldOptions","isInvalid","push","isWarning","join","name","crypto","randomUUID","change","updatedValue","value","onChange","n","prototype","action","setComponentTemplate","precompileTemplate","strictMode","scope","hash","Radio","Component","evt","target","checked","option","currentValue","id","label","on"],"mappings":"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"}