{"version":3,"file":"checkbox-group.js","sources":["../../../src/components/form/checkbox-group.gts"],"sourcesContent":["import { hash } from '@ember/helper';\nimport { action } from '@ember/object';\nimport { htmlSafe } from '@ember/template';\nimport Component from '@glimmer/component';\nimport { runTask } from 'ember-lifeline';\nimport { TrackedSet } from 'tracked-built-ins';\n\nimport Checkbox from './checkbox.gts';\nimport { bind } from '../../helpers/bind.ts';\n\nimport type { FieldOptions } from './field.gts';\nimport type { Binding, CheckboxSignature } from '../../index.ts';\nimport type Owner from '@ember/owner';\nimport type { ComponentLike } from '@glint/template';\n\nexport interface CheckboxGroupSignature {\n  Element: HTMLDivElement;\n  Args: {\n    basic?: boolean;\n    inline?: boolean;\n    reverse?: boolean;\n    type?: 'checkbox' | 'switch';\n\n    fieldOptions?: FieldOptions;\n\n    onInitBinding?: (binding: Binding) => void;\n  };\n  Blocks: {\n    default: [ComponentLike<CheckboxSignature>];\n  };\n}\n\nexport default class CheckboxGroup extends Component<CheckboxGroupSignature> {\n  boxes = new TrackedSet<Checkbox>();\n\n  constructor(owner: Owner, args: CheckboxGroupSignature['Args']) {\n    super(owner, args);\n\n    runTask(this, () => {\n      args.onInitBinding?.(bind(this, 'value'));\n    });\n  }\n\n  get value() {\n    return Array.from(this.boxes)\n      .filter((c) => c.value)\n      .map((c) => c.args.binding!.valuePath);\n  }\n\n  get classList() {\n    const classList = ['form-control', 'form-check-group'];\n\n    if (this.args.basic) {\n      classList[0] += '-plaintext';\n    }\n\n    if (this.args.fieldOptions?.isInvalid) {\n      classList.push('is-invalid');\n    } else if (this.args.fieldOptions?.isWarning) {\n      classList.push('is-warning');\n    }\n\n    return classList.join(' ');\n  }\n\n  @action\n  registerCheckbox(checkbox: Checkbox) {\n    this.boxes.add(checkbox);\n  }\n\n  @action\n  unregisterCheckbox(checkbox: Checkbox) {\n    this.boxes.delete(checkbox);\n  }\n\n  <template>\n    <div\n      class={{this.classList}}\n      style={{if @reverse (htmlSafe \"padding-right: 0.75em !important\")}}\n      ...attributes\n    >\n      {{yield\n        (component\n          Checkbox\n          fieldOptions=(hash\n            describedBy=@fieldOptions.describedBy\n            disabled=@fieldOptions.disabled\n            isInvalid=@fieldOptions.isInvalid\n            isWarning=@fieldOptions.isWarning\n            required=@fieldOptions.required\n          )\n          inline=@inline\n          reverse=@reverse\n          type=@type\n          onDestroy=this.unregisterCheckbox\n          onInit=this.registerCheckbox\n        )\n      }}\n    </div>\n  </template>\n}\n"],"names":["CheckboxGroup","Component","boxes","TrackedSet","constructor","owner","args","runTask","onInitBinding","bind","value","Array","from","filter","c","map","binding","valuePath","classList","basic","fieldOptions","isInvalid","push","isWarning","join","registerCheckbox","checkbox","add","n","prototype","action","unregisterCheckbox","delete","setComponentTemplate","precompileTemplate","strictMode","scope","htmlSafe","Checkbox","hash"],"mappings":";;;;;;;;;;;;AAgCe,MAAMA,sBAAsBC,SAAA,CAAU;AACnDC,EAAAA,KAAA,GAAQ,IAAIC,YAAW;AAEvBC,EAAAA,WAAAA,CAAYC,KAAY,EAAEC,IAAoC,EAAE;AAC9D,IAAA,KAAK,CAACD,KAAA,EAAOC,IAAA,CAAA;IAEbC,OAAA,CAAQ,IAAI,EAAE,MAAA;MACZD,IAAA,CAAKE,aAAa,GAAGC,IAAA,CAAK,IAAI,EAAE,OAAA,CAAA,CAAA;AAClC,IAAA,CAAA,CAAA;AACF,EAAA;EAEA,IAAIC,KAAAA,GAAQ;AACV,IAAA,OAAOC,KAAA,CAAMC,IAAI,CAAC,IAAI,CAACV,KAAK,CAAA,CACzBW,MAAM,CAAEC,CAAA,IAAMA,EAAEJ,KAAK,CAAA,CACrBK,GAAG,CAAED,CAAA,IAAMA,EAAER,IAAI,CAACU,OAAO,CAAEC,SAAS,CAAA;AACzC,EAAA;EAEA,IAAIC,SAAAA,GAAY;AACd,IAAA,MAAMA,SAAA,GAAY,CAAC,cAAA,EAAgB,kBAAA,CAAmB;AAEtD,IAAA,IAAI,IAAI,CAACZ,IAAI,CAACa,KAAK,EAAE;AACnBD,MAAAA,SAAS,CAAC,EAAE,IAAI,YAAA;AAClB,IAAA;AAEA,IAAA,IAAI,IAAI,CAACZ,IAAI,CAACc,YAAY,EAAEC,SAAA,EAAW;AACrCH,MAAAA,SAAA,CAAUI,IAAI,CAAC,YAAA,CAAA;IACjB,CAAA,MAAO,IAAI,IAAI,CAAChB,IAAI,CAACc,YAAY,EAAEG,SAAA,EAAW;AAC5CL,MAAAA,SAAA,CAAUI,IAAI,CAAC,YAAA,CAAA;AACjB,IAAA;AAEA,IAAA,OAAOJ,SAAA,CAAUM,IAAI,CAAC,GAAA,CAAA;AACxB,EAAA;EAGAC,gBAAAA,CAAiBC,QAAkB,EAAE;AACnC,IAAA,IAAI,CAACxB,KAAK,CAACyB,GAAG,CAACD,QAAA,CAAA;AACjB,EAAA;AAAA,EAAA;IAAAE,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,kBAAA,EAAA,CAHCC,MAAA,CAAA,CAAA;AAAA;EAMDC,kBAAAA,CAAmBL,QAAkB,EAAE;AACrC,IAAA,IAAI,CAACxB,KAAK,CAAC8B,MAAM,CAACN,QAAA,CAAA;AACpB,EAAA;AAAA,EAAA;IAAAE,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,oBAAA,EAAA,CAHCC,MAAA,CAAA,CAAA;AAAA;AAKD,EAAA;IAAAG,oBAAA,CAAAC,kBAAA,CAAA,scAAA,EAwBA;MAAAC,UAAA,EAAA,IAAA;AAAAC,MAAAA,KAAA,EAAAA,OAAA;QAAAC,QAAA;QAAAC,QAAA;AAAAC,QAAAA;AAAA,OAAA;KAAU,CAAA,EAAV,IAAW,CAAA;AAAD;AACZ;;;;"}