{"version":3,"file":"on-destroy.js","sources":["../../src/modifiers/on-destroy.ts"],"sourcesContent":["import { registerDestructor } from '@ember/destroyable';\nimport Modifier from 'ember-modifier';\n\nimport type Owner from '@ember/owner';\nimport type { ArgsFor } from 'ember-modifier';\n\ntype CallbackFn<Element, A> = (element: Element, args: A) => void;\nexport interface OnDestroySignature<Element extends HTMLElement, Named extends object> {\n  Element: Element;\n  Args: {\n    Positional: [CallbackFn<Element, Named>];\n    Named: Named;\n  };\n}\n\nexport default class OnDestroy<\n  Element extends HTMLElement,\n  Named extends Record<string, unknown>,\n> extends Modifier<OnDestroySignature<Element, Named>> {\n  declare callback: () => void;\n\n  constructor(owner: Owner, args: ArgsFor<OnDestroySignature<Element, Named>>) {\n    super(owner, args);\n\n    registerDestructor(this, () => {\n      this.callback?.();\n    });\n  }\n\n  modify(element: Element, [callback]: [CallbackFn<Element, Named>], named: Named): void {\n    this.callback = () => callback(element, named);\n  }\n}\n"],"names":["OnDestroy","Modifier","constructor","owner","args","registerDestructor","callback","modify","element","named"],"mappings":";;;AAee,MAAMA,SAAS,SAGpBC,QAAQ,CAAqC;AAGrDC,EAAAA,WAAWA,CAACC,KAAY,EAAEC,IAAiD,EAAE;AAC3E,IAAA,KAAK,CAACD,KAAK,EAAEC,IAAI,CAAC;IAElBC,kBAAkB,CAAC,IAAI,EAAE,MAAM;MAC7B,IAAI,CAACC,QAAQ,IAAI;AACnB,IAAA,CAAC,CAAC;AACJ,EAAA;EAEAC,MAAMA,CAACC,OAAgB,EAAE,CAACF,QAAQ,CAA+B,EAAEG,KAAY,EAAQ;IACrF,IAAI,CAACH,QAAQ,GAAG,MAAMA,QAAQ,CAACE,OAAO,EAAEC,KAAK,CAAC;AAChD,EAAA;AACF;;;;"}